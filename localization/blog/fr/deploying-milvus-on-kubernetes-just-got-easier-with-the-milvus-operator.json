{"codeList":["kubectl get sc\n","RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE\nlocal (default)   openebs.io/local      Delete    WaitForFirstConsumer   false    284d\nnfs-sc            k8s-sigs.io/nfs-...   Delete    Immediate              false    230d\n","wget https://raw.githubusercontent.com/zilliztech/milvus-operator/main/deploy/manifests/deployment.yaml\n","sed -i 's#milvusdb/milvus-operator:v1.2.1#registry.milvus-mirror.cn/&#g' deployment.yaml\n","kubectl apply -f deployment.yaml\n","namespace/milvus-operator created\nserviceaccount/milvus-operator created\ncustomresourcedefinition.apiextensions.k8s.io/milvusclusters.milvus.io created\ncustomresourcedefinition.apiextensions.k8s.io/milvuses.milvus.io created\ncustomresourcedefinition.apiextensions.k8s.io/milvusupgrades.milvus.io created\nclusterrole.rbac.authorization.k8s.io/milvus-operator-manager-role created\nclusterrolebinding.rbac.authorization.k8s.io/milvus-operator-manager-rolebinding created\nrole.rbac.authorization.k8s.io/milvus-operator-leader-election-role created\nrolebinding.rbac.authorization.k8s.io/milvus-operator-leader-election-rolebinding created\nservice/milvus-operator-metrics-service created\nservice/milvus-operator-webhook-service created\ndeployment.apps/milvus-operator created\n","kubectl get deployment,pod -n milvus-operator\n","NAME                              READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/milvus-operator   1/1     1            1           10m\nNAME                                   READY   STATUS        RESTARTS   AGE\npod/milvus-operator-54d4fb854b-7hprh   1/1     Running       0          97s\n","wget https://raw.githubusercontent.com/zilliztech/milvus-operator/main/config/samples/milvus_cluster_default.yaml\n","# This is a sample to deploy a milvus cluster in milvus-operator's default configurations.\napiVersion: milvus.io/v1beta1\nkind: Milvus\nmetadata:\n  name: my-release\n  labels:\n    app: milvus\nspec:\n  mode: cluster\n  dependencies: {}\n  components: {}\n  config: {}\n","apiVersion: milvus.io/v1beta1\nkind: Milvus\nmetadata:\n  name: milvus-release-v25\n  labels:\n    app: milvus\nspec:\n  mode: cluster\n  config: {}\n  components:\n    image: registry.milvus-mirror.cn/milvusdb/milvus:v2.5.4\n    resources:\n      limits:\n        cpu: 2\n        memory: 8Gi\n  dependencies:\n    etcd:\n      inCluster:\n        deletionPolicy: Delete\n        pvcDeletion: true\n        values:\n          global:\n            imageRegistry: registry.milvus-mirror.cn\n            storageClass: nfs-sc\n    storage:\n      inCluster:\n        deletionPolicy: Delete\n        pvcDeletion: true\n        values:\n          resources:\n            limits:\n              cpu: 2\n              memory: 8Gi\n          image:\n            repository: registry.milvus-mirror.cn/milvusdb/minio\n            tag: RELEASE.2023-03-20T20-16-18Z\n          persistence:\n            storageClass: nfs-sc\n            accessMode: ReadWriteOnce\n            size: 10Gi\n    pulsar:\n      inCluster:\n        chartVersion: pulsar-v3\n        deletionPolicy: Delete\n        pvcDeletion: true\n        values:\n          existingStorageClassName: nfs-sc\n          pulsar_metadata:\n            image:\n              repository: registry.milvus-mirror.cn/apachepulsar/pulsar\n              tag: 3.0.7\n          zookeeper:\n            replicaCount: 3\n            volumes:\n              data:\n                size: 5Gi\n                storageClassName: nfs-sc\n          bookkeeper:\n            volumes:\n              journal:\n                size: 5Gi\n                storageClassName: nfs-sc\n              ledgers:\n                size: 5Gi\n                storageClassName: nfs-sc\n          images:\n            zookeeper:\n              repository: registry.milvus-mirror.cn/apachepulsar/pulsar\n              tag: 3.0.7\n            proxy:\n              repository: registry.milvus-mirror.cn/apachepulsar/pulsar\n              tag: 3.0.7\n            broker:\n              repository: registry.milvus-mirror.cn/apachepulsar/pulsar\n              tag: 3.0.7\n            bookie:\n              repository: registry.milvus-mirror.cn/apachepulsar/pulsar\n              tag: 3.0.7\n            autorecovery:\n              repository: registry.milvus-mirror.cn/apachepulsar/pulsar\n              tag: 3.0.7\n","kubectl apply -f milvus_cluster_default.yaml\n","kubectl get deployment\n","NAME                                    READY   UP-TO-DATE   AVAILABLE   AGE\nmilvus-release-v25-milvus-datanode      1/1     1            1           52m\nmilvus-release-v25-milvus-indexnode     1/1     1            1           52m\nmilvus-release-v25-milvus-mixcoord      1/1     1            1           52m\nmilvus-release-v25-milvus-proxy         1/1     1            1           52m\nmilvus-release-v25-milvus-querynode-0   1/1     1            1           52m\nmilvus-release-v25-milvus-querynode-1   0/0     0            0           52m\nmilvus-release-v25-milvus-standalone    0/0     0            0           52m\n","kubectl get pods\n","NAME                                                    READY   STATUS      RESTARTS        AGE\nmilvus-release-v25-etcd-0                               1/1     Running     0               7m15s\nmilvus-release-v25-etcd-1                               1/1     Running     0               7m15s\nmilvus-release-v25-etcd-2                               1/1     Running     0               7m15s\nmilvus-release-v25-milvus-datanode-65bff7b4d9-9h2xv     1/1     Running     0               4m35s\nmilvus-release-v25-milvus-indexnode-5b5cbb4cdc-cxvwj    1/1     Running     0               4m35s\nmilvus-release-v25-milvus-mixcoord-64488898b5-r76rw     1/1     Running     0               4m35s\nmilvus-release-v25-milvus-proxy-5c7fbcb69-cqmq4         1/1     Running     0               4m35s\nmilvus-release-v25-milvus-querynode-0-bc6f57d64-k2wnt   1/1     Running     0               4m35s\nmilvus-release-v25-minio-0                              1/1     Running     0               7m14s\nmilvus-release-v25-minio-1                              1/1     Running     0               7m14s\nmilvus-release-v25-minio-2                              1/1     Running     0               7m14s\nmilvus-release-v25-minio-3                              1/1     Running     0               7m14s\nmilvus-release-v25-pulsar-bookie-0                      1/1     Running     0               7m12s\nmilvus-release-v25-pulsar-bookie-1                      1/1     Running     0               7m12s\nmilvus-release-v25-pulsar-bookie-2                      1/1     Running     0               7m12s\nmilvus-release-v25-pulsar-bookie-init-5zf2z             0/1     Completed   0               7m12s\nmilvus-release-v25-pulsar-broker-0                      1/1     Running     0               7m12s\nmilvus-release-v25-pulsar-broker-1                      1/1     Running     0               7m12s\nmilvus-release-v25-pulsar-proxy-0                       1/1     Running     0               7m12s\nmilvus-release-v25-pulsar-proxy-1                       1/1     Running     0               7m12s\nmilvus-release-v25-pulsar-pulsar-init-twznd             0/1     Completed   0               7m12s\nmilvus-release-v25-pulsar-recovery-0                    1/1     Running     1 (6m25s ago)   7m12s\nmilvus-release-v25-pulsar-zookeeper-0                   1/1     Running     0               7m12s\nmilvus-release-v25-pulsar-zookeeper-1                   1/1     Running     0               7m12s\nmilvus-release-v25-pulsar-zookeeper-2                   1/1     Running     0               7m12s\n","kubectl get pvc\n","NAME                                                                             STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE\ndata-milvus-release-v25-etcd-0                                                   Bound    pvc-3273f9ec-819f-4e84-bdbe-3cd9df697a5f   10Gi       RWO            nfs-sc         36m\ndata-milvus-release-v25-etcd-1                                                   Bound    pvc-01743e13-a989-4aea-8fd0-632ea8b13f98   10Gi       RWO            nfs-sc         36m\ndata-milvus-release-v25-etcd-2                                                   Bound    pvc-594f1a63-efba-4993-89e6-3ee5e333073d   10Gi       RWO            nfs-sc         36m\nexport-milvus-release-v25-minio-0                                                Bound    pvc-477d4e3b-69d7-4bbe-80f7-b747dc4c79f7   10Gi       RWO            nfs-sc         36m\nexport-milvus-release-v25-minio-1                                                Bound    pvc-b12e46fa-8d29-48fb-9ac1-98f80d67b543   10Gi       RWO            nfs-sc         36m\nexport-milvus-release-v25-minio-2                                                Bound    pvc-2e67893e-9611-43dd-9550-b3a7705699ae   10Gi       RWO            nfs-sc         36m\nexport-milvus-release-v25-minio-3                                                Bound    pvc-572c4565-bc38-4215-a13c-061d9199fdea   10Gi       RWO            nfs-sc         36m\nmilvus-release-v25-pulsar-bookie-journal-milvus-release-v25-pulsar-bookie-0      Bound    pvc-183eff99-7a87-406d-9f17-b0fb30c7c0b3   5Gi        RWO            nfs-sc         36m\nmilvus-release-v25-pulsar-bookie-journal-milvus-release-v25-pulsar-bookie-1      Bound    pvc-ebe32304-7d92-44d1-b6fb-4cbaf3207d25   5Gi        RWO            nfs-sc         36m\nmilvus-release-v25-pulsar-bookie-journal-milvus-release-v25-pulsar-bookie-2      Bound    pvc-2ead9186-3d44-4faa-9ae7-784be7ecf6d2   5Gi        RWO            nfs-sc         36m\nmilvus-release-v25-pulsar-bookie-ledgers-milvus-release-v25-pulsar-bookie-0      Bound    pvc-ff1b632d-0a66-4c13-a3bb-2550f9307614   5Gi        RWO            nfs-sc         36m\nmilvus-release-v25-pulsar-bookie-ledgers-milvus-release-v25-pulsar-bookie-1      Bound    pvc-57159e85-bb48-48a9-9706-7a95af8da157   5Gi        RWO            nfs-sc         36m\nmilvus-release-v25-pulsar-bookie-ledgers-milvus-release-v25-pulsar-bookie-2      Bound    pvc-eb235f29-afbd-4a40-9a7d-0340a9686053   5Gi        RWO            nfs-sc         36m\nmilvus-release-v25-pulsar-zookeeper-data-milvus-release-v25-pulsar-zookeeper-0   Bound    pvc-40e02974-3b7d-4f42-bfa7-3252b7615a36   5Gi        RWO            nfs-sc         36m\nmilvus-release-v25-pulsar-zookeeper-data-milvus-release-v25-pulsar-zookeeper-1   Bound    pvc-75904229-3bbf-458e-b0e3-3982e430621b   5Gi        RWO            nfs-sc         36m\nmilvus-release-v25-pulsar-zookeeper-data-milvus-release-v25-pulsar-zookeeper-2   Bound    pvc-2e068b79-75ac-4aa9-9e90-423ff399bad0   5Gi        RWO            nfs-sc         36m\n","kubectl get deployment milvus-release-v25-milvus-mixcoord -o jsonpath='{.spec.template.spec.containers[*].resources.limits}' | jq\n{\n  \"cpu\": \"2\",\n  \"memory\": \"8Gi\"\n}\n","kubectl get deployment milvus-release-v25-milvus-mixcoord -o jsonpath='{.spec.template.spec.containers[0].image}'\nregistry.milvus-mirror.cn/milvusdb/milvus:v2.5.4\n","vi milvus-external-svc.yaml\n","kind: Service\napiVersion: v1\nmetadata:\n  name: milvus-release-v25-external-svc\n  namespace: default\n  labels:\n    app: dmilvus-release-v25-external-svc\nspec:\n  ports:\n    - name: milvus\n      protocol: TCP\n      port: 19530\n      targetPort: 19530\n      nodePort: 31530\n    - name: milvus-web\n      protocol: TCP\n      port: 9091\n      targetPort: 9091\n      nodePort: 31531\n  selector:\n    app.kubernetes.io/component: proxy\n    app.kubernetes.io/instance: milvus-release-v25\n    app.kubernetes.io/name: milvus\n  clusterIP:\n  type: NodePort\n","kubectl apply -f milvus-external-svc.yaml\n","kubectl get svc\n","NAME                                  TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)                                                       AGE\nmilvus-release-v25-external-svc       NodePort    10.233.8.166    <none>        19530:31530/TCP,9091:31531/TCP                                43s\nmilvus-release-v25-etcd               ClusterIP   10.233.27.134   <none>        2379/TCP,2380/TCP                                             16m\nmilvus-release-v25-etcd-headless      ClusterIP   None            <none>        2379/TCP,2380/TCP                                             16m\nmilvus-release-v25-milvus             ClusterIP   10.233.55.194   <none>        19530/TCP,9091/TCP                                            13m\nmilvus-release-v25-minio              ClusterIP   10.233.1.56     <none>        9000/TCP                                                      16m\nmilvus-release-v25-minio-svc          ClusterIP   None            <none>        9000/TCP                                                      16m\nmilvus-release-v25-pulsar-bookie      ClusterIP   None            <none>        3181/TCP,8000/TCP                                             16m\nmilvus-release-v25-pulsar-broker      ClusterIP   None            <none>        8080/TCP,6650/TCP                                             16m\nmilvus-release-v25-pulsar-proxy       ClusterIP   10.233.30.132   <none>        80/TCP,6650/TCP                                               16m\nmilvus-release-v25-pulsar-recovery    ClusterIP   None            <none>        8000/TCP                                                      16m\nmilvus-release-v25-pulsar-zookeeper   ClusterIP   None            <none>        8000/TCP,2888/TCP,3888/TCP,2181/TCP                           16m\n"],"headingContent":"","anchorList":[{"label":"Qu'est-ce que l'Opérateur Milvus ?","href":"What-is-the-Milvus-Operator","type":2,"isActive":false},{"label":"Fonctionnement de l'opérateur Milvus","href":"How-the-Milvus-Operator-Works","type":2,"isActive":false},{"label":"Pourquoi utiliser Milvus Operator plutôt que Helm ou YAML ?","href":"Why-Use-Milvus-Operator-Instead-of-Helm-or-YAML","type":2,"isActive":false},{"label":"Démarrage avec Milvus Operator","href":"Getting-Started-with-Milvus-Operator","type":2,"isActive":false},{"label":"Conclusion","href":"Conclusion","type":2,"isActive":false}]}
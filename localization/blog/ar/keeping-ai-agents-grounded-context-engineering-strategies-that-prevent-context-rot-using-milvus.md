---
id: >-
  keeping-ai-agents-grounded-context-engineering-strategies-that-prevent-context-rot-using-milvus.md
title: >-
  إبقاء وكلاء الذكاء الاصطناعي راسخين: استراتيجيات هندسة السياق التي تمنع تعفن
  السياق باستخدام ميلفوس
author: Min Yin
date: 2025-12-23T00:00:00.000Z
cover: assets.zilliz.com/context_rot_cover_804387e7c9.png
tag: Engineering
recommend: false
publishToMedium: true
tags: 'Milvus, vector database'
meta_keywords: 'context engineering, context rot, vector database, Milvus, vector search'
meta_title: |
  Context Engineering Strategies to Prevent LLM Context Rot with Milvus
desc: >-
  تعرّف على سبب حدوث تعفّن السياق في عمليات سير عمل إدارة التعلم الآلي طويلة
  الأمد، وكيف تساعد هندسة السياق واستراتيجيات الاسترجاع والبحث المتجه Milvus في
  الحفاظ على دقة وكلاء الذكاء الاصطناعي وتركيزهم وموثوقيتهم في المهام المعقدة
  متعددة الخطوات.
origin: >-
  https://milvus.io/blog/keeping-ai-agents-grounded-context-engineering-strategies-that-prevent-context-rot-using-milvus.md
---
<p>إذا كنت قد عملت مع محادثات LLM طويلة الأمد، فربما تكون قد مررت بهذه اللحظة المحبطة: في منتصف الطريق خلال موضوع طويل، يبدأ النموذج بالانحراف. تصبح الإجابات غامضة، ويضعف المنطق، وتختفي التفاصيل الرئيسية بشكل غامض. ولكن إذا قمت بإسقاط نفس المطالبة بالضبط في دردشة جديدة، فجأة يتصرف النموذج بشكل مركّز ودقيق وثابت.</p>
<p>هذا ليس "تعب" النموذج - إنه <strong>تعفن السياق</strong>. مع نمو المحادثة، يضطر النموذج إلى التوفيق بين المزيد من المعلومات، وتتراجع قدرته على تحديد الأولويات ببطء. تُظهر <a href="https://www.anthropic.com/engineering/effective-context-engineering-for-ai-agents">دراسات أنتروبيك</a> أنه مع امتداد نوافذ السياق من حوالي 8 آلاف رمز إلى 128 ألف رمز، يمكن أن تنخفض دقة الاسترجاع بنسبة 15-30%. لا يزال لدى النموذج متسع، ولكنه يفقد مسار ما هو مهم. تساعد نوافذ السياق الأكبر في تأخير المشكلة، لكنها لا تقضي عليها.</p>
<p>وهنا يأتي دور <strong>هندسة السياق</strong>. فبدلاً من تسليم النموذج كل شيء دفعة واحدة، نقوم بتشكيل ما يراه: استرجاع الأجزاء المهمة فقط، وضغط ما لم يعد هناك حاجة إلى الإسهاب، والحفاظ على نظافة المطالبات والأدوات بما يكفي لكي يستوعبها النموذج. الهدف بسيط: إتاحة المعلومات المهمة في اللحظة المناسبة، وتجاهل الباقي.</p>
<p>يلعب الاسترجاع دورًا مركزيًا هنا، خاصةً بالنسبة للوكلاء الذين يعملون لفترة طويلة. توفر قواعد البيانات المتجهة مثل <a href="https://milvus.io/"><strong>Milvus</strong></a> الأساس لسحب المعرفة ذات الصلة بكفاءة إلى السياق، مما يسمح للنظام بالبقاء على الأرض حتى مع نمو المهام من حيث العمق والتعقيد.</p>
<p>في هذه المدونة، سنلقي نظرة على كيفية حدوث دوران السياق، والاستراتيجيات التي تستخدمها الفرق لإدارته، والأنماط المعمارية - من الاسترجاع إلى التصميم الفوري - التي تحافظ على قوة وكلاء الذكاء الاصطناعي عبر عمليات سير العمل الطويلة والمتعددة الخطوات.</p>
<h2 id="Why-Context-Rot-Happens" class="common-anchor-header">لماذا يحدث تعفن السياق<button data-href="#Why-Context-Rot-Happens" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>غالباً ما يفترض الناس أن إعطاء نموذج الذكاء الاصطناعي المزيد من السياق يؤدي بشكل طبيعي إلى إجابات أفضل. ولكن هذا ليس صحيحاً في الواقع. فالبشر يكافح البشر مع المدخلات الطويلة أيضاً: يشير العلم المعرفي إلى أن ذاكرتنا العاملة تستوعب ما يقرب من <strong>7 ± 2 جزء</strong> من المعلومات. وعندما نتجاوز ذلك، نبدأ في نسيان التفاصيل أو تشويشها أو إساءة تفسيرها.</p>
<p>تُظهِر ذاكرتنا العاملة ذات السلوك المماثل - ولكن على نطاق أوسع بكثير ومع أنماط فشل أكثر دراماتيكية.</p>
<p>تأتي المشكلة الجذرية من <a href="https://zilliz.com/learn/decoding-transformer-models-a-study-of-their-architecture-and-underlying-principles">بنية المحول</a> نفسها. يجب أن يقارن كل رمز رمزي نفسه مع كل رمز رمزي آخر، مما يشكل اهتمامًا ثنائيًا عبر التسلسل بأكمله. هذا يعني أن الحساب ينمو <strong>O(n²)</strong> مع طول السياق. إن توسيع المطالبة من ألف رمز إلى 100 ألف لا يجعل النموذج "يعمل بجهد أكبر" - بل يضاعف عدد تفاعلات الرمز المميز بـ <strong>10000 مرة</strong>.</p>
<p>
  <span class="img-wrapper">
    <img translate="no" src="https://assets.zilliz.com/contextual_dilution_622033db72.png" alt="" class="doc-image" id="" />
    <span></span>
  </span>
</p>
<p><strong>ثم هناك مشكلة في بيانات التدريب.</strong> ترى النماذج تسلسلات قصيرة أكثر بكثير من تلك الطويلة. لذلك عندما تطلب من نموذج LLM العمل عبر سياقات كبيرة للغاية، فأنت تدفعه إلى نظام لم يتم تدريبه عليه بشكل كبير. من الناحية العملية، غالبًا ما يكون التفكير في السياق الطويل جدًا <strong>خارج نطاق توزيع</strong> معظم النماذج.</p>
<p>على الرغم من هذه الحدود، فإن السياق الطويل أصبح الآن أمرًا لا مفر منه. كانت التطبيقات المبكرة لـ LLM في الغالب مهام أحادية الدوران - التصنيف أو التلخيص أو التوليد البسيط. أما اليوم، فإن أكثر من 70% من أنظمة الذكاء الاصطناعي للمؤسسات تعتمد على وكلاء يظلون نشطين عبر العديد من جولات التفاعل، وغالبًا لساعات، ويديرون عمليات سير عمل متفرعة ومتعددة الخطوات. لقد انتقلت الجلسات طويلة الأمد من الاستثناء إلى الوضع الافتراضي.</p>
<p>والسؤال التالي هو: <strong>كيف نحافظ على انتباه النموذج دون أن نربكه في العمل؟</strong></p>
<h2 id="Context-Retrieval-Approaches-to-Solving-Context-Rot" class="common-anchor-header">مناهج استرجاع السياق لحل تعفن السياق<button data-href="#Context-Retrieval-Approaches-to-Solving-Context-Rot" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>الاسترجاع هو أحد أكثر الوسائل فعالية لدينا لمكافحة تعفن السياق، وفي الممارسة العملية يميل إلى الظهور في أنماط تكميلية تعالج تعفن السياق من زوايا مختلفة.</p>
<h3 id="1-Just-in-Time-Retrieval-Reducing-Unnecessary-Context" class="common-anchor-header">1. الاسترجاع في الوقت المناسب: تقليل السياق غير الضروري</h3><p>أحد الأسباب الرئيسية لتعفن السياق هو <em>إثقال</em> النموذج بمعلومات لا يحتاجها بعد. يحل كلود كود - مساعد الترميز في أنثروبيك - هذه المشكلة من خلال استرجاع المعلومات <strong>في الوقت المناسب (JIT)</strong>، وهي استراتيجية حيث يقوم النموذج بجلب المعلومات فقط عندما تصبح ذات صلة.</p>
<p>فبدلاً من حشو قواعد برمجة أو مجموعات بيانات كاملة في سياقه (مما يزيد بشكل كبير من فرصة الانجراف والنسيان)، يحتفظ كلود كود بفهرس صغير: مسارات الملفات والأوامر وروابط التوثيق. عندما يحتاج النموذج إلى معلومة ما، فإنه يسترجع ذلك العنصر المحدد ويدخله في السياق <strong>في اللحظة التي يهمه فيها - وليس</strong>قبل ذلك.</p>
<p>على سبيل المثال، إذا طلبت من Claude Code تحليل قاعدة بيانات بسعة 10 جيجابايت، فإنه لا يحاول أبدًا تحميل كل شيء. إنه يعمل مثل المهندس:</p>
<ol>
<li><p>يقوم بتشغيل استعلام SQL لسحب ملخصات عالية المستوى لمجموعة البيانات.</p></li>
<li><p>يستخدم أوامر مثل <code translate="no">head</code> و <code translate="no">tail</code> لعرض عينة من البيانات وفهم بنيتها.</p></li>
<li><p>يحتفظ فقط بالمعلومات الأكثر أهمية - مثل الإحصائيات الرئيسية أو صفوف العينة - في السياق.</p></li>
</ol>
<p>من خلال تقليل ما يتم الاحتفاظ به في السياق، يمنع استرجاع JIT تراكم الرموز غير ذات الصلة التي تسبب التعفن. يبقى النموذج مركزًا لأنه لا يرى سوى المعلومات المطلوبة لخطوة الاستدلال الحالية.</p>
<h3 id="2-Pre-retrieval-Vector-Search-Preventing-Context-Drift-Before-It-Starts" class="common-anchor-header">2. الاسترجاع المسبق (البحث المتجه): منع انجراف السياق قبل أن يبدأ</h3><p>في بعض الأحيان لا يمكن للنموذج "طلب" المعلومات ديناميكيًا - غالبًا ما يحتاج دعم العملاء وأنظمة الأسئلة والأجوبة وسير عمل الوكيل إلى المعرفة الصحيحة المتاحة <em>قبل</em> بدء التوليد. هنا يصبح <strong>الاسترجاع المسبق</strong> أمراً بالغ الأهمية.</p>
<p>غالبًا ما يحدث تعفن السياق لأن النموذج يتم تسليمه كومة كبيرة من النص الخام ويتوقع منه فرز ما هو مهم. يقلب الاسترجاع المسبق ذلك: تقوم قاعدة البيانات المتجهة (مثل <a href="https://milvus.io/">Milvus</a> <a href="https://zilliz.com/cloud">وZilliz Cloud</a>) بتحديد الأجزاء الأكثر أهمية <em>قبل</em> الاستنتاج، مما يضمن وصول السياق عالي القيمة فقط إلى النموذج.</p>
<p>في إعداد RAG النموذجي:</p>
<ul>
<li><p>يتم تضمين المستندات وتخزينها في قاعدة بيانات متجهة، مثل Milvus.</p></li>
<li><p>في وقت الاستعلام، يسترجع النظام مجموعة صغيرة من الأجزاء ذات الصلة العالية من خلال عمليات البحث عن التشابه.</p></li>
<li><p>تدخل تلك القطع فقط في سياق النموذج.</p></li>
</ul>
<p>هذا يمنع التعفن بطريقتين:</p>
<ul>
<li><p><strong>الحد من الضوضاء:</strong> لا يدخل النص غير ذي الصلة أو ذي الصلة الضعيفة في السياق في المقام الأول.</p></li>
<li><p><strong>الكفاءة:</strong> تقوم النماذج بمعالجة عدد أقل بكثير من الرموز، مما يقلل من فرصة فقدان التفاصيل الأساسية.</p></li>
</ul>
<p>يمكن لـ Milvus البحث في ملايين المستندات في أجزاء من الثانية، مما يجعل هذا النهج مثاليًا للأنظمة المباشرة حيث يكون زمن الاستجابة مهمًا.</p>
<h3 id="3-Hybrid-JIT-and-Vector-Retrieval" class="common-anchor-header">3. الاسترجاع المسبق الهجين المستند إلى المتجهات</h3><p>يعالج الاسترجاع المسبق المستند إلى البحث الناقل جزءًا مهمًا من تعفن السياق من خلال ضمان بدء النموذج بمعلومات عالية الإشارة بدلاً من النص الخام الضخم. لكن أنثروبيك يسلط الضوء على تحديين حقيقيين غالبًا ما تغفلهما الفرق:</p>
<ul>
<li><p><strong>التوقيت:</strong> إذا تم تحديث قاعدة المعرفة بشكل أسرع من إعادة بناء الفهرس المتجه، فقد يعتمد النموذج على معلومات قديمة.</p></li>
<li><p><strong>الدقة:</strong> قبل أن تبدأ المهمة، من الصعب التنبؤ بدقة بما سيحتاجه النموذج - خاصةً بالنسبة لسير العمل متعدد الخطوات أو الاستكشافي.</p></li>
</ul>
<p>لذلك في أعباء العمل في العالم الحقيقي، فإن التطبيق الهجين هو الحل الأمثل.</p>
<ul>
<li><p>البحث المتجه عن معرفة مستقرة وعالية الثقة</p></li>
<li><p>الاستكشاف المشترك المستند إلى الوكيل للمعلومات التي تتطور أو تصبح ذات صلة فقط في منتصف المهمة</p></li>
</ul>
<p>من خلال المزج بين هذين النهجين، يمكنك الحصول على سرعة وكفاءة استرجاع المتجهات للمعلومات المعروفة، ومرونة النموذج لاكتشاف وتحميل البيانات الجديدة كلما أصبحت ذات صلة.</p>
<p>لنلقِ نظرة على كيفية عمل ذلك في نظام حقيقي. خذ مساعد توثيق الإنتاج، على سبيل المثال. تستقر معظم الفرق في النهاية على خط أنابيب من مرحلتين: البحث المتجه المدعوم من ميلفوس + استرجاع JIT القائم على الوكيل.</p>
<p><strong>1. البحث الناقل المدعوم من ميلفوس (الاسترجاع المسبق)</strong></p>
<ul>
<li><p>قم بتحويل وثائقك ومراجع واجهة برمجة التطبيقات وسجلات التغيير والمشكلات المعروفة إلى تضمينات.</p></li>
<li><p>قم بتخزينها في قاعدة بيانات Milvus Vector مع البيانات الوصفية مثل منطقة المنتج والإصدار ووقت التحديث.</p></li>
<li><p>عندما يطرح أحد المستخدمين سؤالاً، قم بإجراء بحث دلالي للحصول على أهم المقاطع ذات الصلة.</p></li>
</ul>
<p>يؤدي هذا إلى حل ما يقرب من 80% من الاستفسارات الروتينية في أقل من 500 مللي ثانية، مما يمنح النموذج نقطة انطلاق قوية ومقاومة للسياق.</p>
<p><strong>2. الاستكشاف المستند إلى الوكيل</strong></p>
<p>عندما يكون الاسترجاع الأولي غير كافٍ - على سبيل المثال، عندما يطلب المستخدم شيئًا محددًا للغاية أو حساسًا للوقت - يمكن للوكيل استدعاء أدوات لجلب معلومات جديدة:</p>
<ul>
<li><p>استخدم <code translate="no">search_code</code> لتحديد موقع دوال أو ملفات محددة في قاعدة الرموز</p></li>
<li><p>استخدم <code translate="no">run_query</code> لسحب البيانات في الوقت الحقيقي من قاعدة البيانات.</p></li>
<li><p>استخدم <code translate="no">fetch_api</code> للحصول على أحدث حالة للنظام</p></li>
</ul>
<p>تستغرق هذه المكالمات عادةً <strong>من 3 إلى 5 ثوانٍ،</strong> لكنها تضمن عمل النموذج دائمًا ببيانات جديدة ودقيقة وذات صلة - حتى بالنسبة للأسئلة التي لم يتمكن النظام من توقعها مسبقًا.</p>
<p>تضمن هذه البنية الهجينة بقاء السياق في الوقت المناسب وصحيحًا ومحددًا للمهام، مما يقلل بشكل كبير من مخاطر تعفن السياق في عمليات سير عمل الوكيل طويلة الأمد.</p>
<p>يعتبر Milvus فعّالاً بشكل خاص في هذه السيناريوهات الهجينة لأنه يدعم:</p>
<ul>
<li><p><strong>البحث المتجه + التصفية القياسية،</strong> والجمع بين الصلة الدلالية والقيود المنظمة</p></li>
<li><p><strong>تحديثات متزايدة،</strong> مما يسمح بتحديث التضمينات دون توقف</p></li>
</ul>
<p>وهذا يجعل من ميلفوس عمودًا فقريًا مثاليًا للأنظمة التي تحتاج إلى كل من الفهم الدلالي والتحكم الدقيق فيما يتم استرجاعه.</p>
<p>
  <span class="img-wrapper">
    <img translate="no" src="https://assets.zilliz.com/milvus_in_hybrid_architecture_7d4e391aa4.png" alt="" class="doc-image" id="" />
    <span></span>
  </span>
</p>
<p>على سبيل المثال، يمكنك تشغيل استعلام مثل:</p>
<pre><code translate="no"><span class="hljs-comment"># You can combine queries like this in Milvus</span>
collection.search(
    data=[query_embedding],  <span class="hljs-comment"># Semantic similarity</span>
    anns_field=<span class="hljs-string">&quot;embedding&quot;</span>,
    param={<span class="hljs-string">&quot;metric_type&quot;</span>: <span class="hljs-string">&quot;COSINE&quot;</span>, <span class="hljs-string">&quot;params&quot;</span>: {<span class="hljs-string">&quot;nprobe&quot;</span>: <span class="hljs-number">10</span>}},
    expr=<span class="hljs-string">&quot;doc_type == &#x27;API&#x27; and update_time &gt; &#x27;2025-01-01&#x27;&quot;</span>,  <span class="hljs-comment"># Structured filtering</span>
    limit=<span class="hljs-number">5</span>
)
<button class="copy-code-btn"></button></code></pre>
<h2 id="How-to-Choose-the-Right-Approach-for-Dealing-With-Context-Rot" class="common-anchor-header">كيفية اختيار النهج الصحيح للتعامل مع تعفن السياق<button data-href="#How-to-Choose-the-Right-Approach-for-Dealing-With-Context-Rot" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>مع توفر كل من الاسترجاع المسبق للبحث المتجه، والاسترجاع في الوقت المناسب، والاسترجاع الهجين، فإن السؤال الطبيعي هو: <strong>أيهما يجب أن تستخدم؟</strong></p>
<p>إليك طريقة بسيطة وعملية للاختيار بناءً على مدى <em>استقرار</em> معرفتك ومدى <em>إمكانية التنبؤ</em> باحتياجات النموذج من المعلومات.</p>
<h3 id="1-Vector-Search-→-Best-for-Stable-Domains" class="common-anchor-header">1. البحث المتجه → الأفضل للمجالات المستقرة</h3><p>إذا كان المجال يتغير ببطء ولكنه يتطلب الدقة - التمويل، والعمل القانوني، والامتثال، والوثائق الطبية - فعادةً ما تكون قاعدة المعرفة التي تعمل بنظام Milvus مع <strong>الاسترجاع المسبق</strong> هي الأنسب.</p>
<p>تكون المعلومات محددة بشكل جيد، والتحديثات نادرة، ويمكن الإجابة على معظم الأسئلة من خلال استرجاع المستندات ذات الصلة من الناحية الدلالية مقدمًا.</p>
<p><strong>مهام يمكن التنبؤ بها + معرفة مستقرة → الاسترجاع المسبق.</strong></p>
<h3 id="2-Just-in-Time-Retrieval-→-Best-for-Dynamic-Exploratory-Workflows" class="common-anchor-header">2. الاسترجاع في الوقت المناسب → الأفضل لسير العمل الديناميكي والاستكشافي</h3><p>تنطوي مجالات مثل هندسة البرمجيات وتصحيح الأخطاء والتحليلات وعلوم البيانات على بيئات سريعة التغير: ملفات جديدة وبيانات جديدة وحالات نشر جديدة. لا يمكن للنموذج التنبؤ بما سيحتاج إليه قبل بدء المهمة.</p>
<p><strong>مهام لا يمكن التنبؤ بها + معرفة سريعة التغير ← استرجاع في الوقت المناسب.</strong></p>
<h3 id="3-Hybrid-Approach-→-When-Both-Conditions-Are-True" class="common-anchor-header">3. النهج الهجين → عندما يكون كلا الشرطين صحيحًا</h3><p>العديد من الأنظمة الحقيقية ليست مستقرة تمامًا أو ديناميكية بحتة. على سبيل المثال، تتغير وثائق المطورين ببطء، بينما تتغير حالة بيئة الإنتاج دقيقة بدقيقة. يتيح لك النهج الهجين</p>
<ul>
<li><p>تحميل معرفة معروفة ومستقرة باستخدام البحث المتجه (سريع، منخفضة الكمون)</p></li>
<li><p>جلب معلومات ديناميكية باستخدام أدوات الوكيل عند الطلب (دقيقة ومحدثة)</p></li>
</ul>
<p><strong>معرفة مختلطة + بنية مهام مختلطة → نهج الاسترجاع الهجين.</strong></p>
<h2 id="What-if-the-Context-Window-Still-Isn’t-Enough" class="common-anchor-header">ماذا لو كانت نافذة السياق لا تزال غير كافية<button data-href="#What-if-the-Context-Window-Still-Isn’t-Enough" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>تساعد هندسة السياق في تقليل الحمل الزائد، ولكن في بعض الأحيان تكون المشكلة أكثر جوهرية: <strong>المهمة ببساطة لن تتسع،</strong> حتى مع التشذيب الدقيق.</p>
<p>يمكن أن تتجاوز بعض عمليات سير العمل - مثل ترحيل قاعدة رموز كبيرة، أو مراجعة البنى متعددة المستودعات، أو إنشاء تقارير بحثية عميقة - أكثر من 200 ألف نافذة سياق قبل أن يصل النموذج إلى نهاية المهمة. حتى مع قيام البحث المتجه بأعباء ثقيلة، تتطلب بعض المهام ذاكرة أكثر ثباتًا وتنظيمًا.</p>
<p>في الآونة الأخيرة، قدمت أنثروبيك ثلاث استراتيجيات عملية.</p>
<h3 id="1-Compression-Preserve-Signal-Drop-Noise" class="common-anchor-header">1. الضغط: الحفاظ على الإشارة وإسقاط الضوضاء</h3><p>عندما تقترب نافذة السياق من الحد الأقصى، يمكن للنموذج <strong>ضغط التفاعلات السابقة</strong> إلى ملخصات موجزة. يحافظ الضغط الجيد على</p>
<ul>
<li><p>القرارات الرئيسية</p></li>
<li><p>القيود والمتطلبات</p></li>
<li><p>القضايا المعلقة</p></li>
<li><p>العينات أو الأمثلة ذات الصلة</p></li>
</ul>
<p>ويزيل</p>
<ul>
<li><p>مخرجات الأداة المطولة</p></li>
<li><p>السجلات غير ذات الصلة</p></li>
<li><p>الخطوات الزائدة عن الحاجة</p></li>
</ul>
<p>التحدي هو التوازن. الضغط بقوة، فيفقد النموذج المعلومات المهمة؛ والضغط الخفيف، فتكسب مساحة صغيرة. يحافظ الضغط الفعال على "لماذا" و"ماذا" بينما يتجاهل "كيف وصلنا إلى هنا".</p>
<h3 id="2-Structured-Note-Taking-Move-Stable-Information-Outside-Context" class="common-anchor-header">2. التدوين المنظم للملاحظات: نقل المعلومات المستقرة خارج السياق</h3><p>بدلاً من الاحتفاظ بكل شيء داخل نافذة النموذج، يمكن للنظام تخزين الحقائق المهمة في <strong>ذاكرة خارجية -</strong>قاعدة بيانات منفصلة أو مخزن منظم يمكن للوكيل الاستعلام عنه حسب الحاجة.</p>
<p>على سبيل المثال، يخزّن نموذج بوكيمون-وكيل كلود حقائق دائمة مثل:</p>
<ul>
<li><p><code translate="no">Pikachu leveled up to 8</code></p></li>
<li><p><code translate="no">Trained 1234 steps on Route 1</code></p></li>
<li><p><code translate="no">Goal: reach level 10</code></p></li>
</ul>
<p>وفي الوقت نفسه، تبقى التفاصيل العابرة - سجلات المعارك، ومخرجات الأدوات الطويلة - خارج السياق النشط. وهذا يعكس كيفية استخدام البشر لدفاتر الملاحظات: نحن لا نحتفظ بكل التفاصيل في ذاكرتنا العاملة؛ بل نخزن النقاط المرجعية خارجيًا ونبحث عنها عند الحاجة.</p>
<p>التدوين المنظم للملاحظات يمنع تعفّن السياق الناجم عن التفاصيل المتكررة وغير الضرورية مع إعطاء النموذج مصدرًا موثوقًا للحقيقة.</p>
<h3 id="3-Sub-Agent-Architecture-Divide-and-Conquer-Large-Tasks" class="common-anchor-header">3. بنية الوكيل الفرعي: تقسيم المهام الكبيرة</h3><p>بالنسبة للمهام المعقدة، يمكن تصميم بنية متعددة الوكلاء حيث يشرف وكيل رئيسي على العمل الكلي، بينما يتولى عدة وكلاء فرعيين متخصصين جوانب محددة من المهمة. يتعمق هؤلاء الوكلاء الفرعيون في كميات كبيرة من البيانات المتعلقة بمهامهم الفرعية ولكن لا يعيدون سوى النتائج الأساسية الموجزة. يشيع استخدام هذا النهج في سيناريوهات مثل التقارير البحثية أو تحليل البيانات.</p>
<p>
  <span class="img-wrapper">
    <img translate="no" src="https://assets.zilliz.com/longduration_task_cbbc07b9ca.png" alt="" class="doc-image" id="" />
    <span></span>
  </span>
</p>
<p>من الناحية العملية، من الأفضل البدء باستخدام وكيل واحد مع الضغط للتعامل مع المهمة. يجب إدخال التخزين الخارجي فقط عندما تكون هناك حاجة للاحتفاظ بالذاكرة عبر الجلسات. يجب حجز البنية متعددة الوكلاء للمهام التي تتطلب حقًا معالجة متوازية لمهام فرعية معقدة ومتخصصة.</p>
<p>يعمل كل نهج على توسيع "الذاكرة العاملة" الفعالة للنظام دون إفساد نافذة السياق - ودون التسبب في تعفن السياق.</p>
<h2 id="Best-Practices-for-Designing-Context-That-Actually-Works" class="common-anchor-header">أفضل الممارسات لتصميم سياق يعمل بالفعل<button data-href="#Best-Practices-for-Designing-Context-That-Actually-Works" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>بعد التعامل مع تجاوز السياق، هناك جزء آخر لا يقل أهمية: كيفية بناء السياق في المقام الأول. حتى مع الضغط، والملاحظات الخارجية، والوكلاء الفرعيين، سيعاني النظام إذا لم يتم تصميم الموجه والأدوات نفسها لدعم التفكير الطويل والمعقد.</p>
<p>
  <span class="img-wrapper">
    <img translate="no" src="https://assets.zilliz.com/System_Prompts_cf655dcd0d.png" alt="" class="doc-image" id="" />
    <span></span>
  </span>
</p>
<p>يقدم أنثروبيك طريقة مفيدة للتفكير في هذا الأمر - أقل من كونه تمرينًا واحدًا لكتابة المطالبة، وأكثر من كونه بناء سياق عبر ثلاث طبقات.</p>
<h3 id="System-Prompts-Find-the-Goldilocks-Zone" class="common-anchor-header"><strong>موجهات النظام: البحث عن منطقة المعتدل</strong></h3><p>تفشل معظم مطالبات النظام في أقصى الحدود. فالكثير من التفاصيل -قوائم من القواعد والشروط المتداخلة والاستثناءات المشفرة- تجعل المطالبة هشة ويصعب الحفاظ عليها. البنية القليلة جدًا تجعل النموذج يخمن ما يجب القيام به.</p>
<p>أفضل المطالبات تقع في المنتصف: منظمة بما فيه الكفاية لتوجيه السلوك، ومرنة بما فيه الكفاية للنموذج لكي يفكر. عمليًا، هذا يعني إعطاء النموذج دورًا واضحًا وسير عمل عام وإرشادات خفيفة للأداة - لا أكثر ولا أقل.</p>
<p>على سبيل المثال:</p>
<pre><code translate="no">You are a technical documentation assistant serving developers.
<span class="hljs-number">1.</span> Start <span class="hljs-keyword">by</span> retrieving relevant documents <span class="hljs-keyword">from</span> the Milvus knowledge <span class="hljs-keyword">base</span>.  
<span class="hljs-number">2.</span> If the retrieval results are insufficient, use the `search_code` tool to perform a deeper search <span class="hljs-keyword">in</span> the codebase.  
<span class="hljs-number">3.</span> When answering, cite specific documentation sections <span class="hljs-keyword">or</span> code line numbers.

<span class="hljs-meta">## Tool guidance</span>
- search_docs: Used <span class="hljs-keyword">for</span> semantic retrieval, best <span class="hljs-keyword">for</span> conceptual questions.  
- search_code: Used <span class="hljs-keyword">for</span> precise lookup <span class="hljs-keyword">in</span> the codebase, best <span class="hljs-keyword">for</span> implementation-detail questions.  
…
<button class="copy-code-btn"></button></code></pre>
<p>تحدد هذه المطالبة التوجيهات دون إرباك النموذج أو إجباره على التلاعب بالمعلومات الديناميكية التي لا تنتمي إلى هذا المكان.</p>
<h3 id="Tool-Design-Less-Is-More" class="common-anchor-header">تصميم الأداة: الأقل هو الأكثر</h3><p>بمجرد أن يحدد موجه النظام السلوك عالي المستوى، تحمل الأدوات المنطق التشغيلي الفعلي. هناك وضع فشل شائع بشكل مدهش في الأنظمة المعززة بالأدوات هو ببساطة وجود الكثير من الأدوات - أو وجود أدوات تتداخل أغراضها.</p>
<p>هناك قاعدة عامة جيدة:</p>
<ul>
<li><p><strong>أداة واحدة، غرض واحد</strong></p></li>
<li><p><strong>معلمات واضحة لا لبس فيها</strong></p></li>
<li><p><strong>عدم تداخل المسؤوليات</strong></p></li>
</ul>
<p>إذا كان المهندس البشري سيتردد بشأن الأداة التي يجب استخدامها، فإن النموذج سيتردد أيضًا. يقلل التصميم النظيف للأداة من الغموض، ويقلل من العبء المعرفي، ويمنع ازدحام السياق بمحاولات الأدوات غير الضرورية.</p>
<p>
  <span class="img-wrapper">
    <img translate="no" src="https://assets.zilliz.com/tooling_complexity_7d2bb60c54.png" alt="" class="doc-image" id="" />
    <span></span>
  </span>
</p>
<h3 id="Dynamic-Information-Should-Be-Retrieved-Not-Hardcoded" class="common-anchor-header">يجب استرجاع المعلومات الديناميكية وليس ترميزها بشكل ثابت</h3><p>الطبقة الأخيرة هي الأسهل في التغاضي عنها. لا ينبغي أن تظهر المعلومات الديناميكية أو الحساسة للوقت - مثل قيم الحالة أو التحديثات الأخيرة أو الحالة الخاصة بالمستخدم - في مطالبة النظام على الإطلاق. حيث أن إدخالها في المطالبة يضمن أنها ستصبح قديمة أو متضخمة أو متناقضة خلال المهام الطويلة.</p>
<p>بدلاً من ذلك، يجب جلب هذه المعلومات فقط عند الحاجة إليها، إما من خلال الاسترجاع أو عبر أدوات الوكيل. إن إبقاء المحتوى الديناميكي خارج موجه النظام يمنع تعفن السياق ويحافظ على نظافة مساحة التفكير في النموذج.</p>
<h2 id="Conclusion" class="common-anchor-header">الخاتمة<button data-href="#Conclusion" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>مع انتقال وكلاء الذكاء الاصطناعي إلى بيئات الإنتاج في مختلف الصناعات، فإنهم يتولون مهام سير عمل أطول ومهام أكثر تعقيداً من أي وقت مضى. في هذه الإعدادات، تصبح إدارة السياق ضرورة عملية.</p>
<p><strong>ومع ذلك، فإن نافذة السياق الأكبر لا تؤدي تلقائياً إلى نتائج أفضل؛</strong> ففي كثير من الحالات، تؤدي إلى عكس ذلك. عندما يكون النموذج مثقلاً بالأعباء أو يتم تغذيته بمعلومات قديمة أو يتم إجباره على القيام بمطالبات ضخمة، تنحرف الدقة بهدوء. هذا الانحدار البطيء الخفي هو ما نسميه الآن <strong>تعفن السياق</strong>.</p>
<p>تهدف تقنيات مثل الاسترجاع السريع، والاسترجاع المسبق، وخطوط الأنابيب الهجينة، والبحث الدلالي المدعوم بقاعدة البيانات المتجهة إلى نفس الهدف: <strong>التأكد من أن النموذج يرى المعلومات الصحيحة في اللحظة المناسبة - لا أكثر ولا أقل - حتى يتمكن من البقاء على الأرض وإنتاج إجابات موثوقة.</strong></p>
<p>وباعتبارها قاعدة بيانات متجهة مفتوحة المصدر وعالية الأداء، تقع <a href="https://milvus.io/"><strong>Milvus</strong></a> في صميم سير العمل هذا. فهي توفر البنية التحتية لتخزين المعرفة بكفاءة واسترجاع الأجزاء الأكثر صلة بوقت استجابة منخفض. يساعد ميلفوس وكلاء الذكاء الاصطناعي على الحفاظ على دقة وكلاء الذكاء الاصطناعي كلما أصبحت مهامهم أعمق وأكثر ديناميكية.</p>
<p>ولكن الاسترجاع هو جزء واحد فقط من اللغز. فالتصميم الفوري الجيد، ومجموعة الأدوات النظيفة والبسيطة واستراتيجيات التدفق الزائد المعقولة - سواءً كان ضغطًا أو ملاحظات منظمة أو وكلاء فرعيين - تعمل جميعها معًا للحفاظ على تركيز النموذج عبر جلسات طويلة الأمد. هذا هو ما تبدو عليه هندسة السياق الحقيقي: ليس الاختراقات الذكية، بل البنية المدروسة.</p>
<p>إذا كنت تريد وكلاء ذكاء اصطناعيًا يحافظون على دقة العمل على مدار ساعات أو أيام أو سير عمل كامل، فإن السياق يستحق نفس الاهتمام الذي توليه لأي جزء أساسي آخر من مجموعتك.</p>
<p>هل لديك أسئلة أو تريد التعمق في أي ميزة؟ انضم إلى<a href="https://discord.com/invite/8uyFbECzPX"> قناة Discord</a> الخاصة بنا أو قم بتسجيل المشكلات على<a href="https://github.com/milvus-io/milvus"> GitHub</a>. يمكنك أيضًا حجز جلسة فردية مدتها 20 دقيقة للحصول على رؤى وإرشادات وإجابات لأسئلتك من خلال<a href="https://milvus.io/blog/join-milvus-office-hours-to-get-support-from-vectordb-experts.md"> ساعات عمل Milvus المكتبية</a>.</p>

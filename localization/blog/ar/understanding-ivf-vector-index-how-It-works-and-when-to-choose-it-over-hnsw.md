---
id: understanding-ivf-vector-index-how-It-works-and-when-to-choose-it-over-hnsw.md
title: 'فهم مؤشر ناقل التلقيح الاصطناعي: كيف يعمل ومتى يتم اختياره بدلاً من HNSW'
author: Jack Li
date: 2025-10-27T00:00:00.000Z
cover: assets.zilliz.com/ivf_cover_157df122bc.png
tag: Tutorials
recommend: false
publishToMedium: true
tags: 'Milvus, vector database'
meta_keywords: 'IVF, ANN, HNSW, vector index, vector database'
meta_title: How to Choose Between IVF and HNSW for ANN Vector Search
desc: >-
  تعرّف على كيفية عمل فهرس متجه IVF، وكيفية تسريع بحث الشبكة العصبية الاصطناعية،
  ومتى يتفوق على HNSW في السرعة والذاكرة وكفاءة التصفية.
origin: >-
  https://milvus.io/blog/understanding-ivf-vector-index-how-It-works-and-when-to-choose-it-over-hnsw.md
---
<p>في قاعدة بيانات المتجهات، غالبًا ما نحتاج إلى العثور بسرعة على النتائج الأكثر تشابهًا بين مجموعات كبيرة من المتجهات عالية الأبعاد - مثل ميزات الصور أو تضمينات النصوص أو التمثيلات الصوتية. بدون فهرس، يكون الخيار الوحيد هو مقارنة متجه الاستعلام مع كل متجه في مجموعة البيانات. قد ينجح هذا <strong>البحث بالقوة الغاشمة</strong> عندما يكون لديك بضعة آلاف من المتجهات، ولكن بمجرد أن تتعامل مع عشرات أو مئات الملايين، يصبح بطيئًا ومكلفًا حسابيًا بشكل لا يطاق.</p>
<p>وهنا يأتي دور البحث عن <strong>الجار الأقرب التقريبي (ANN)</strong>. فكر في الأمر مثل البحث عن كتاب معين في مكتبة ضخمة. بدلاً من التحقق من كل كتاب واحد تلو الآخر، تبدأ بتصفح الأقسام التي من المرجح أن تحتوي على الكتاب. قد لا تحصل على نفس نتائج البحث الكامل <em>بالضبط،</em> ولكنك ستحصل على نتائج قريبة جدًا - وفي جزء صغير من الوقت. باختصار، تستبدل الشبكة العصبية الاصطناعية خسارة طفيفة في الدقة مقابل زيادة كبيرة في السرعة وقابلية التوسع.</p>
<p>من بين العديد من طرق تنفيذ بحث الشبكة العصبية الاصطناعية ( <strong>IVF</strong> ) و <strong>HNSW (العالم الصغير القابل للتنقل الهرمي)</strong> هما من أكثر الطرق استخدامًا. لكن IVF يتميز بكفاءته وقدرته على التكيف في البحث المتجه واسع النطاق. في هذه المقالة، سنرشدك في هذه المقالة إلى كيفية عمل IVF وكيفية مقارنته مع HNSW - حتى تتمكن من فهم المفاضلة بينهما واختيار أفضل ما يناسب عبء العمل لديك.</p>
<h2 id="What-is-an-IVF-Vector-Index" class="common-anchor-header">ما هو فهرس IVF Vector Index؟<button data-href="#What-is-an-IVF-Vector-Index" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>إن<strong>IVF (الملف المقلوب)</strong> هو أحد أكثر الخوارزميات استخدامًا للشبكة العصبية الاصطناعية. إنه يستعير فكرته الأساسية من "الفهرس المقلوب" المستخدم في أنظمة استرجاع النصوص - ولكن هذه المرة، بدلاً من الكلمات والمستندات، نحن نتعامل مع متجهات في فضاء عالي الأبعاد.</p>
<p>فكر في الأمر مثل تنظيم مكتبة ضخمة. إذا قمت بإلقاء كل كتاب (متجه) في كومة واحدة عملاقة، فإن العثور على ما تحتاجه سيستغرق وقتًا طويلاً. يحل IVF هذه المشكلة عن طريق <strong>تجميع</strong> كل المتجهات أولاً في مجموعات أو <em>دلاء</em>. يمثّل كل دلو "فئة" من المتجهات المتشابهة، يتم تحديدها بواسطة <strong>مركزية - وهو</strong>نوع من الملخص أو "التسمية" لكل شيء داخل تلك المجموعة.</p>
<p>عندما يأتي استعلام، يحدث البحث في خطوتين:</p>
<p><strong>1. البحث عن أقرب المجموعات.</strong> يبحث النظام عن المجموعات القليلة التي تكون مركزياتها الأقرب إلى متجه الاستعلام - تمامًا مثل التوجه مباشرةً إلى قسمين أو ثلاثة أقسام في المكتبة التي من المرجح أن يكون كتابك موجودًا فيها.</p>
<p><strong>2. ابحث داخل تلك المجموعات.</strong> بمجرد وصولك إلى الأقسام الصحيحة، ما عليك سوى البحث في مجموعة صغيرة من الكتب بدلاً من المكتبة بأكملها.</p>
<p>هذا النهج يقلل من حجم العملية الحسابية بأضعاف. لا تزال تحصل على نتائج دقيقة للغاية - ولكن بشكل أسرع بكثير.</p>
<h2 id="How-to-Build-an-IVF-Vector-Index" class="common-anchor-header">كيفية بناء فهرس متجه IVF<button data-href="#How-to-Build-an-IVF-Vector-Index" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>تتضمن عملية بناء فهرس متجه IVF ثلاث خطوات رئيسية: تجميع K-means، وتعيين المتجهات، وترميز الضغط (اختياري). تبدو العملية الكاملة على النحو التالي:</p>
<p>
  <span class="img-wrapper">
    <img translate="no" src="https://assets.zilliz.com/ivf_building_process_90c2966975.webp" alt="" class="doc-image" id="" />
    <span></span>
  </span>
</p>
<h3 id="Step-1-K-means-Clustering" class="common-anchor-header">الخطوة 1: التجميع بوسائل K-means</h3><p>أولاً، قم بتشغيل التجميع بوسائل K-means على مجموعة البيانات X لتقسيم الفضاء المتجه عالي الأبعاد إلى مجموعات قائمة n. يتم تمثيل كل مجموعة بنقطة مركزية يتم تخزينها في جدول النقاط المركزية C. عدد النقاط المركزية، nlist، هو معيار رئيسي يحدد مدى دقة التجميع.</p>
<p>إليك كيفية عمل k-means تحت الغطاء:</p>
<ul>
<li><p><strong>التهيئة:</strong> تحديد متجهات <em>nlist</em> عشوائيًا كمتجهات مركزية أولية.</p></li>
<li><p><strong>التعيين:</strong> بالنسبة لكل متجه، احسب المسافة التي تفصله عن جميع المتجهات وقم بتعيينه إلى أقرب متجه.</p></li>
<li><p><strong>التحديث:</strong> بالنسبة لكل مجموعة، احسب متوسط متجهاتها وقم بتعيين ذلك كمتجه مركزي جديد.</p></li>
<li><p><strong>التكرار والتقارب:</strong> كرر التعيين والتحديث إلى أن تتوقف الوسطيات عن التغير بشكل ملحوظ أو يتم الوصول إلى الحد الأقصى لعدد التكرارات.</p></li>
</ul>
<p>بمجرد أن يتقارب k-means، تشكل مركزيات القائمة النونية الناتجة "دليل الفهرس" ل IVF. فهي تحدد كيف يتم تقسيم مجموعة البيانات بشكل خشن، مما يسمح للاستعلامات بتضييق مساحة البحث بسرعة في وقت لاحق.</p>
<p>فكّر مرة أخرى في تشبيه المكتبة: إن تدريب مركزيات التدريب يشبه تحديد كيفية تجميع الكتب حسب الموضوع:</p>
<ul>
<li><p>تعني القائمة النونية الأكبر عددًا أكبر من الأقسام، كل منها يحتوي على عدد أقل من الكتب الأكثر تحديدًا.</p></li>
<li><p>القائمة النونية الأصغر تعني عددًا أقل من الأقسام، كل منها يغطي نطاقًا أوسع وأكثر تنوعًا من الموضوعات.</p></li>
</ul>
<h3 id="Step-2-Vector-Assignment" class="common-anchor-header">الخطوة 2: تعيين المتجهات</h3><p>بعد ذلك، يتم تعيين كل متجه إلى المجموعة التي يكون مركزها الأقرب إليه، مما يشكل قوائم مقلوبة (List_i). تخزّن كل قائمة مقلوبة المعرّفات ومعلومات التخزين لجميع المتجهات التي تنتمي إلى تلك المجموعة.</p>
<p>يمكنك التفكير في هذه الخطوة مثل وضع الكتب على الرفوف في الأقسام الخاصة بكل منها. عندما تبحث عن عنوان ما لاحقًا، ما عليك سوى التحقق من الأقسام القليلة التي من المرجح أن تحتوي عليه، بدلًا من التجول في المكتبة بأكملها.</p>
<h3 id="Step-3-Compression-Encoding-Optional" class="common-anchor-header">الخطوة 3: ترميز الضغط (اختياري)</h3><p>لحفظ الذاكرة وتسريع عملية الحساب، يمكن أن تخضع المتجهات داخل كل مجموعة لترميز الضغط. هناك طريقتان شائعتان:</p>
<ul>
<li><p><strong>SQ8 (التكميم الكمّي):</strong> تعمل هذه الطريقة على تكميم كل بُعد من أبعاد المتجه إلى 8 بتات. بالنسبة لمتجه قياسي <code translate="no">float32</code> ، يشغل كل بُعد عادةً 4 بايت. مع SQ8، يتم اختزاله إلى 1 بايت فقط - مما يحقق نسبة ضغط 4:1 مع الحفاظ على هندسة المتجه سليمة إلى حد كبير.</p></li>
<li><p><strong>PQ (التكميم الكمي للمنتج):</strong> يقسم المتجه عالي الأبعاد إلى عدة مساحات فرعية. على سبيل المثال، يمكن تقسيم المتجه ذي ال 128 بُعدًا إلى 8 متجهات فرعية لكل منها 16 بُعدًا. في كل فضاء فرعي، يتم تدريب دفتر رموز صغير (عادةً ما يحتوي على 256 مدخلاً) مسبقًا، ويتم تمثيل كل متجه فرعي بفهرس 8 بت يشير إلى أقرب مدخل من دفتر الرموز الخاص به. وهذا يعني أنه يمكن تمثيل المتجه الأصلي 128-D <code translate="no">float32</code> (الذي يتطلب 512 بايت) باستخدام 8 بايت فقط (8 مساحات فرعية × 1 بايت لكل منها)، مما يحقق نسبة ضغط 64:1.</p></li>
</ul>
<h2 id="How-to-Use-the-IVF-Vector-Index-for-Search" class="common-anchor-header">كيفية استخدام فهرس متجه IVF للبحث<button data-href="#How-to-Use-the-IVF-Vector-Index-for-Search" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>بمجرد بناء الجدول المركزي، والقوائم المقلوبة، وأداة تشفير الضغط ودفاتر الترميز (اختياري)، يمكن استخدام فهرس IVF لتسريع البحث عن التشابه. تتكون العملية عادةً من ثلاث خطوات رئيسية، كما هو موضح أدناه:</p>
<p>
  <span class="img-wrapper">
    <img translate="no" src="https://assets.zilliz.com/ivf_search_process_025d3f444f.webp" alt="" class="doc-image" id="" />
    <span></span>
  </span>
</p>
<h3 id="Step-1-Calculate-distances-from-the-query-vector-to-all-centroids" class="common-anchor-header">الخطوة 1: حساب المسافات من متجه الاستعلام إلى جميع المراكز</h3><p>عند وصول متجه الاستعلام q، يحدد النظام أولاً المجموعات التي من المرجح أن ينتمي إليها. بعد ذلك، يقوم بحساب المسافة بين المتجه q وكل مركز في جدول المراكز C - عادةً باستخدام المسافة الإقليدية أو الضرب الداخلي كمقياس للتشابه. يتم بعد ذلك فرز المركزيات حسب المسافة التي تفصلها عن متجه الاستعلام، مما ينتج قائمة مرتبة من الأقرب إلى الأبعد.</p>
<p>على سبيل المثال، كما هو موضَّح في الرسم التوضيحي، يكون الترتيب هو ج 4 &lt; ج 2 &lt; ج 1 &lt; ج 3 &lt; ج 5.</p>
<h3 id="Step-2-Select-the-nearest-nprobe-clusters" class="common-anchor-header">الخطوة 2: حدد أقرب مجموعات nprobe</h3><p>لتجنّب مسح مجموعة البيانات بأكملها، يبحث IVF فقط ضمن مجموعات <em>nprobe</em> الأقرب إلى متجه الاستعلام.</p>
<p>تحدد المعلمة nprobe نطاق البحث وتؤثر بشكل مباشر على التوازن بين السرعة والاستدعاء:</p>
<ul>
<li><p>يؤدي المسبار nprobe الأصغر إلى استعلامات أسرع ولكنه قد يقلل من التذكر.</p></li>
<li><p>يحسن المسبار nprobe الأكبر من الاستدعاء ولكنه يزيد من زمن الاستجابة.</p></li>
</ul>
<p>في أنظمة العالم الواقعي، يمكن ضبط nprobe بشكل ديناميكي بناءً على ميزانية زمن الاستجابة أو متطلبات الدقة. في المثال أعلاه، إذا كان nprobe = 2، سيبحث النظام فقط داخل المجموعة 2 والمجموعة 4 - أقرب مجموعتين.</p>
<h3 id="Step-3-Search-the-nearest-neighbor-in-the-selected-clusters" class="common-anchor-header">الخطوة 3: البحث في أقرب جار في المجموعات المختارة</h3><p>بمجرد اختيار المجموعات المرشحة، يقوم النظام بمقارنة متجه الاستعلام q مع المتجهات المخزنة داخلها. هناك طريقتان رئيسيتان للمقارنة:</p>
<ul>
<li><p><strong>المقارنة الدقيقة (IVF_FLAT)</strong>: يسترجع النظام المتجهات الأصلية من المجموعات المختارة ويحسب مسافاتها إلى q مباشرة، ويعيد النتائج الأكثر دقة.</p></li>
<li><p><strong>المقارنة التقريبية (IVF_PQ / IVF_SQ8)</strong>: عند استخدام ضغط PQ أو SQ8، يستخدم النظام <strong>طريقة جدول البحث</strong> لتسريع عملية حساب المسافة. قبل بدء البحث، يحسب النظام مسبقًا المسافات بين متجه الاستعلام وكل إدخال في دفتر الرموز. ثم، لكل متجه، يمكنه ببساطة "البحث عن هذه المسافات المحسوبة مسبقًا وجمعها" لتقدير التشابه.</p></li>
</ul>
<p>أخيرًا، يتم دمج النتائج المرشحة من جميع المجموعات التي تم البحث عنها وإعادة تصنيفها، مما ينتج عنه المتجهات الأكثر تشابهًا من بين المتجهات الأكثر تشابهًا كأفضل-ك كمخرج نهائي.</p>
<h2 id="IVF-In-Practice" class="common-anchor-header">IVF في الممارسة العملية<button data-href="#IVF-In-Practice" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>بمجرد فهمك لكيفية <strong>إنشاء</strong> فهارس متجهات IVF <strong>والبحث</strong> فيها، فإن الخطوة التالية هي تطبيقها على أعباء العمل في العالم الحقيقي. عمليًا، ستحتاج غالبًا إلى الموازنة بين <strong>الأداء</strong> <strong>والدقة</strong> <strong>واستخدام الذاكرة</strong>. فيما يلي بعض الإرشادات العملية المستمدة من الخبرة الهندسية.</p>
<h3 id="How-to-Choose-the-Right-nlist" class="common-anchor-header">كيفية اختيار القائمة nlist الصحيحة</h3><p>كما ذكرنا سابقًا، تحدّد المعلمة nlist عدد المجموعات التي يتم تقسيم مجموعة البيانات إليها عند إنشاء فهرس IVF.</p>
<ul>
<li><p><strong>قائمة nlist أكبر</strong>: تُنشئ مجموعات أكثر دقة، ما يعني أن كل مجموعة تحتوي على عدد أقل من المتجهات. هذا يقلل من عدد المتجهات التي يتم مسحها ضوئيًا أثناء البحث وينتج عنه بشكل عام استعلامات أسرع. لكن بناء الفهرس يستغرق وقتًا أطول، ويستهلك جدول النواة المركزية ذاكرة أكبر.</p></li>
<li><p><strong>قائمة ن أصغر</strong>: يسرّع بناء الفهرس ويقلل من استخدام الذاكرة، لكن كل مجموعة تصبح أكثر "ازدحامًا". يجب أن يقوم كل استعلام بمسح المزيد من المتجهات داخل المجموعة، مما قد يؤدي إلى اختناقات في الأداء.</p></li>
</ul>
<p>استنادًا إلى هذه المفاضلات، إليك قاعدة عملية:</p>
<p>بالنسبة لمجموعات البيانات <strong>بمقياس المليون،</strong> فإن نقطة البداية الجيدة هي <strong>nlist ≈ √n</strong> (n هو عدد المتجهات في جزء البيانات الذي تتم فهرسته).</p>
<p>على سبيل المثال، إذا كان لديك مليون متجه، جرّب nlist = 1,000. بالنسبة لمجموعات البيانات الأكبر حجمًا - عشرات أو مئات الملايين - تقوم معظم قواعد البيانات المتجهة بتجزئة البيانات بحيث تحتوي كل جزء على حوالي مليون متجه، مع الحفاظ على هذه القاعدة عملية.</p>
<p>نظرًا لأن nlist ثابت عند إنشاء الفهرس، فإن تغييره لاحقًا يعني إعادة بناء الفهرس بأكمله. لذا من الأفضل إجراء التجربة مبكرًا. اختبر عدة قيم - عادةً بقوى من اثنين (على سبيل المثال، 1024، 2048) - للعثور على أفضل نقطة توازن بين السرعة والدقة والذاكرة لعبء العمل لديك.</p>
<h3 id="How-to-Tune-nprobe" class="common-anchor-header">كيفية ضبط nprobe</h3><p>تتحكم المعلمة nprobe في عدد المجموعات التي يتم البحث عنها أثناء وقت الاستعلام. وهي تؤثر بشكل مباشر على المفاضلة بين الاستدعاء والكمون.</p>
<ul>
<li><p><strong>nprobe أكبر</strong>: يغطي عددًا أكبر من المجموعات، مما يؤدي إلى استرجاع أعلى، ولكن يؤدي أيضًا إلى زمن انتقال أعلى. يزداد التأخير بشكل عام بشكل خطي مع عدد المجموعات التي يتم البحث فيها.</p></li>
<li><p><strong>مسبار nprobe أصغر</strong>: يبحث في مجموعات أقل، مما يؤدي إلى زمن استجابة أقل واستعلامات أسرع. ومع ذلك، قد يفوت بعض الجيران الأقرب الحقيقيين، مما يقلل قليلاً من الاستدعاء ودقة النتائج.</p></li>
</ul>
<p>إذا لم يكن تطبيقك حسّاسًا للغاية تجاه زمن الاستجابة، فمن الجيّد تجربة nprobe ديناميكيًا - على سبيل المثال، اختبار القيم من 1 إلى 16 لمراقبة كيفية تغيّر الاسترجاع وزمن الاستجابة. الهدف هو العثور على النقطة المثالية حيث يكون الاستدعاء مقبولًا ويبقى زمن الاستجابة ضمن النطاق المستهدف.</p>
<p>نظرًا لأن nprobe هي معلمة بحث في وقت التشغيل، يمكن تعديلها أثناء التنقل دون الحاجة إلى إعادة بناء الفهرس. يتيح ذلك ضبطًا سريعًا ومنخفض التكلفة ومرنًا للغاية عبر أعباء العمل أو سيناريوهات الاستعلام المختلفة.</p>
<h3 id="Common-Variants-of-the-IVF-Index" class="common-anchor-header">المتغيرات الشائعة لفهرس IVF</h3><p>عند إنشاء فهرس IVF، ستحتاج إلى تحديد ما إذا كنت تريد استخدام ترميز الضغط للمتجهات في كل مجموعة - وإذا كان الأمر كذلك، فما هي الطريقة التي يجب استخدامها.</p>
<p>وينتج عن ذلك ثلاثة متغيرات شائعة لفهرس IVF:</p>
<table>
<thead>
<tr><th><strong>متغير IVF</strong></th><th><strong>الميزات الرئيسية</strong></th><th><strong>حالات الاستخدام</strong></th></tr>
</thead>
<tbody>
<tr><td><strong>IVF_FLAT</strong></td><td>يخزن المتجهات الخام داخل كل مجموعة دون ضغط. يوفر أعلى دقة، ولكنه يستهلك أيضًا أكبر قدر من الذاكرة.</td><td>مثالي لمجموعات البيانات متوسطة الحجم (حتى مئات الملايين من المتجهات) حيث يتطلب استرجاعًا عاليًا (95%+).</td></tr>
<tr><td><strong>IVF_PQ</strong></td><td>يطبّق خاصية تحديد كمية المنتج (PQ) لضغط المتجهات داخل المجموعات. من خلال ضبط نسبة الضغط، يمكن تقليل استخدام الذاكرة بشكل كبير.</td><td>مناسب للبحث عن المتجهات واسعة النطاق (مئات الملايين أو أكثر) حيث يكون فقدان بعض الدقة مقبولاً. مع نسبة ضغط 64:1، عادةً ما تكون نسبة الاسترجاع حوالي 70%، ولكن يمكن أن تصل إلى 90% أو أعلى من خلال خفض نسبة الضغط.</td></tr>
<tr><td><strong>IVF_SQ8</strong></td><td>يستخدم التكميم الكمي القياسي (SQ8) لتكميم المتجهات. يقع استخدام الذاكرة بين IVF_FLAT و IVF_PQ.</td><td>مثالي للبحث عن المتجهات واسعة النطاق حيث تحتاج إلى الحفاظ على استرجاع عالٍ نسبيًا (90%+) مع تحسين الكفاءة.</td></tr>
</tbody>
</table>
<h2 id="IVF-vs-HNSW-Pick-What-Fits" class="common-anchor-header">IVF مقابل HNSW: اختر ما يناسبك<button data-href="#IVF-vs-HNSW-Pick-What-Fits" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>إلى جانب IVF، فإن <strong>HNSW (العالم الصغير القابل للتنقل الهرمي)</strong> هو فهرس متجه آخر مستخدم على نطاق واسع في الذاكرة. يسلط الجدول أدناه الضوء على الاختلافات الرئيسية بين الاثنين.</p>
<table>
<thead>
<tr><th></th><th><strong>IVF</strong></th><th><strong>HNSW</strong></th></tr>
</thead>
<tbody>
<tr><td><strong>مفهوم الخوارزمية</strong></td><td>التجميع والتجميع في مجموعات</td><td>تصفح الرسم البياني متعدد الطبقات</td></tr>
<tr><td><strong>استخدام الذاكرة</strong></td><td>منخفضة نسبياً</td><td>عالية نسبياً</td></tr>
<tr><td><strong>سرعة إنشاء الفهرس</strong></td><td>سريع (يتطلب تجميعًا فقط)</td><td>بطيء (يحتاج إلى إنشاء رسم بياني متعدد الطبقات)</td></tr>
<tr><td><strong>سرعة الاستعلام (بدون تصفية)</strong></td><td>سريع، يعتمد على <em>nprobe</em></td><td>سريع للغاية، ولكن مع تعقيد لوغاريتمي</td></tr>
<tr><td><strong>سرعة الاستعلام (مع التصفية)</strong></td><td>مستقر - يقوم بإجراء تصفية خشنة على مستوى النواة المركزية لتضييق نطاق المرشحين</td><td>غير مستقر - خاصةً عندما تكون نسبة التصفية عالية (90% فأكثر)، يصبح الرسم البياني مجزأً وقد يتدهور إلى اجتياز الرسم البياني الكامل تقريبًا، حتى أنه أبطأ من البحث بالقوة الغاشمة</td></tr>
<tr><td><strong>معدل الاسترجاع</strong></td><td>يعتمد على ما إذا كان يتم استخدام الضغط أم لا؛ بدون تكميم، يمكن أن يصل معدل التذكر إلى <strong>95%+</strong></td><td>عادةً أعلى، حوالي <strong>98%+</strong></td></tr>
<tr><td><strong>المعلمات الرئيسية</strong></td><td><em>nlist</em>, <em>nprobe</em></td><td><em>م،</em> <em>ef_construction،</em> <em>ef_search</em></td></tr>
<tr><td><strong>حالات الاستخدام</strong></td><td>عندما تكون الذاكرة محدودة، لكن أداء الاستعلام والاستدعاء العاليين مطلوبان؛ مناسب تمامًا لعمليات البحث مع شروط التصفية</td><td>عندما تكون الذاكرة كافية والهدف هو الاستدعاء والأداء العالي للغاية في الاستعلام، ولكن لا تكون هناك حاجة إلى التصفية، أو عندما تكون نسبة التصفية منخفضة</td></tr>
</tbody>
</table>
<p>في تطبيقات العالم الحقيقي، من الشائع جدًا تضمين شروط التصفية - على سبيل المثال، "متجهات البحث فقط من مستخدم معين" أو "حصر النتائج في نطاق زمني معين". نظرًا للاختلافات في الخوارزميات الأساسية الخاصة بهم، يتعامل IVF بشكل عام مع عمليات البحث التي تمت تصفيتها بشكل أكثر كفاءة من HNSW.</p>
<p>تكمن قوة IVF في عملية التصفية ذات المستويين. فيمكنه أولاً إجراء تصفية دقيقة على مستوى النواة المركزية (المجموعة) لتضييق نطاق المجموعة المرشحة بسرعة، ثم إجراء حسابات المسافة الدقيقة داخل المجموعات المختارة. يحافظ هذا على أداء مستقر ويمكن التنبؤ به، حتى عند تصفية جزء كبير من البيانات.</p>
<p>في المقابل، يعتمد HNSW على اجتياز الرسم البياني. وبسبب بنيته، لا يمكنه الاستفادة مباشرةً من شروط التصفية أثناء اجتيازه. عندما تكون نسبة التصفية منخفضة، فإن هذا لا يسبب مشاكل كبيرة. ومع ذلك، عندما تكون نسبة التصفية عالية (على سبيل المثال، عندما يتم تصفية أكثر من 90% من البيانات)، غالبًا ما يصبح الرسم البياني المتبقي مجزأ، مما يشكل العديد من "العقد المعزولة". في مثل هذه الحالات، قد يتدهور البحث إلى اجتياز شبه كامل للرسم البياني - وأحيانًا أسوأ من البحث بالقوة الغاشمة.</p>
<p>من الناحية العملية، تعمل فهارس IVF بالفعل على تشغيل العديد من حالات الاستخدام عالية التأثير في مجالات مختلفة:</p>
<ul>
<li><p><strong>البحث في التجارة الإلكترونية:</strong> يمكن للمستخدم تحميل صورة منتج والعثور فوراً على عناصر متشابهة بصرياً من ملايين القوائم.</p></li>
<li><p><strong>استرجاع براءات الاختراع:</strong> بالنظر إلى وصف قصير، يمكن للنظام تحديد موقع براءات الاختراع الأكثر ارتباطًا من الناحية الدلالية من قاعدة بيانات ضخمة - أكثر كفاءة بكثير من البحث التقليدي بالكلمات الرئيسية.</p></li>
<li><p><strong>قواعد المعرفة RAG:</strong> يساعد نظام IVF في استرجاع السياق الأكثر صلة من ملايين المستندات المستأجرة، مما يضمن أن نماذج الذكاء الاصطناعي تولد استجابات أكثر دقة وأساساً.</p></li>
</ul>
<h2 id="Conclusion" class="common-anchor-header">الخلاصة<button data-href="#Conclusion" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>لاختيار الفهرس المناسب، يعود الأمر كله إلى حالة الاستخدام الخاصة بك. إذا كنت تعمل مع مجموعات بيانات واسعة النطاق أو تحتاج إلى دعم عمليات البحث المصفاة، يمكن أن يكون فهرس التلقيح الاصطناعي هو الأنسب. بالمقارنة مع الفهارس المستندة إلى الرسم البياني مثل HNSW، يوفر IVF إنشاء فهرس أسرع، واستخدام أقل للذاكرة، وتوازن قوي بين السرعة والدقة.</p>
<p>توفر<a href="https://milvus.io/">Milvus،</a> قاعدة البيانات المتجهة مفتوحة المصدر الأكثر شيوعًا، الدعم الكامل لعائلة IVF بأكملها، بما في ذلك IVF_FLAT و IVF_PQ و IVF_SQ8. يمكنك بسهولة تجربة هذه الأنواع من الفهارس والعثور على الإعداد الذي يناسب احتياجات الأداء والذاكرة لديك. للاطلاع على قائمة كاملة من الفهارس التي يدعمها Milvus، راجع <a href="https://milvus.io/docs/index-explained.md">صفحة مستند فهرس Milvus</a> هذه.</p>
<p>إذا كنت تقوم ببناء بحث عن الصور أو أنظمة التوصيات أو قواعد معرفة RAG، جرب فهرسة IVF في Milvus - وشاهد مدى كفاءة البحث المتجه واسع النطاق في العمل.</p>

---
id: we-replaced-kafka-pulsar-with-a-woodpecker-for-milvus.md
title: استبدلنا كافكا/بولسار بنقار الخشب في ميلفوس-إليك ما حدث
author: James Luan
date: 2025-05-15T00:00:00.000Z
desc: >-
  لقد قمنا ببناء Woodpecker، وهو نظام WAL سحابي أصلي سحابي، ليحل محل Kafka
  وPulsar في Milvus لتقليل التعقيد التشغيلي والتكلفة.
cover: >-
  assets.zilliz.com/We_Replaced_Kafka_Pulsar_with_a_Woodpecker_for_Milvus_Here_s_What_Happened_77e8de27a9.png
tag: Engineering
recommend: true
publishToMedium: true
tags: 'Milvus, vector database, vector search, AI Agents, LLM'
meta_keywords: >-
  Replace Kafka, replace Pulsar, messaging queues, Write-Ahead Logging (WAL),
  Milvus vector database
meta_title: |
  We Replaced Kafka/Pulsar with a Woodpecker for Milvus
origin: >-
  https://milvus.io/blog/we-replaced-kafka-pulsar-with-a-woodpecker-for-milvus.md
---
<p><strong>خلاصة القول:</strong> لقد أنشأنا نظام Woodpecker، وهو نظام تسجيل الكتابة الأمامية السحابية (WAL)، ليحل محل Kafka وPulsar في Milvus 2.6. والنتيجة؟ عمليات مبسطة، وأداء أفضل، وتكاليف أقل لقاعدة بيانات Milvus المتجهة.</p>
<p>
  <span class="img-wrapper">
    <img translate="no" src="https://assets.zilliz.com/We_Replaced_Kafka_Pulsar_with_a_Woodpecker_for_Milvus_Here_s_What_Happened_77e8de27a9.png" alt="" class="doc-image" id="" />
    <span></span>
  </span>
</p>
<h2 id="The-Starting-Point-When-Message-Queues-No-Longer-Fit" class="common-anchor-header">نقطة البداية: عندما لم تعد قوائم انتظار الرسائل مناسبة<button data-href="#The-Starting-Point-When-Message-Queues-No-Longer-Fit" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>لقد أحببنا واستخدمنا كافكا وبولسار. كانا يعملان حتى لم يعودا كذلك. مع تطور Milvus، قاعدة البيانات المتجهة الرائدة مفتوحة المصدر، وجدنا أن قوائم انتظار الرسائل القوية هذه لم تعد تلبي متطلبات قابلية التوسع لدينا. لذلك اتخذنا خطوة جريئة: أعدنا كتابة العمود الفقري للبث في Milvus 2.6 وقمنا بتنفيذ WAL الخاص بنا - <strong>Woodpecker</strong>.</p>
<p>دعني أطلعك على رحلتنا وأشرح لك سبب قيامنا بهذا التغيير، والذي قد يبدو للوهلة الأولى غير بديهي.</p>
<h2 id="Cloud-Native-From-Day-One" class="common-anchor-header">سحابة أصلية منذ اليوم الأول<button data-href="#Cloud-Native-From-Day-One" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>كانت ميلفوس قاعدة بيانات سحابية أصلية منذ بدايتها. نحن نستفيد من Kubernetes للتوسع المرن والتعافي السريع من الأعطال، إلى جانب حلول تخزين الكائنات مثل Amazon S3 وMinIO لاستمرار البيانات.</p>
<p>يوفر هذا النهج الذي يعتمد على السحابة أولاً مزايا هائلة، ولكنه يقدم أيضًا بعض التحديات:</p>
<ul>
<li><p>حيث توفر خدمات تخزين الكائنات السحابية مثل S3 قدرة غير محدودة تقريبًا على التعامل مع الإنتاجية والتوافر، ولكن مع وجود فترات تأخير تتجاوز 100 مللي ثانية في كثير من الأحيان.</p></li>
<li><p>يمكن لنماذج تسعير هذه الخدمات (استنادًا إلى أنماط الوصول والتكرار) أن تضيف تكاليف غير متوقعة لعمليات قواعد البيانات في الوقت الفعلي.</p></li>
<li><p>إن تحقيق التوازن بين الخصائص السحابية الأصلية ومتطلبات البحث المتجه في الوقت الحقيقي يقدم تحديات معمارية كبيرة.</p></li>
</ul>
<h2 id="The-Shared-Log-Architecture-Our-Foundation" class="common-anchor-header">بنية السجل المشترك: أساسنا<button data-href="#The-Shared-Log-Architecture-Our-Foundation" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>تقصر العديد من أنظمة البحث المتجه على معالجة الدُفعات لأن بناء نظام تدفق في بيئة سحابية أصلية يمثل تحديات أكبر. في المقابل، يعطي Milvus الأولوية لحداثة البيانات في الوقت الحقيقي ويطبق بنية سجل مشترك - فكر في الأمر على أنه محرك أقراص صلبة لنظام الملفات.</p>
<p>توفر بنية السجل المشترك هذه أساسًا مهمًا يفصل بروتوكولات الإجماع عن وظائف قاعدة البيانات الأساسية. من خلال اعتماد هذا النهج، تلغي Milvus الحاجة إلى إدارة بروتوكولات الإجماع المعقدة مباشرة، مما يسمح لنا بالتركيز على تقديم قدرات بحث متجهية استثنائية.</p>
<p>نحن لسنا الوحيدين في هذا النمط المعماري - فقواعد البيانات مثل AWS Aurora وAurora وAzure Socrates وNeon جميعها تستفيد من تصميم مماثل. <strong>ومع ذلك، لا تزال هناك فجوة كبيرة في النظام البيئي مفتوح المصدر: على الرغم من المزايا الواضحة لهذا النهج، يفتقر المجتمع إلى تطبيق سجل الكتابة الموزعة (WAL) الموزع منخفض الكمون وقابل للتطوير وفعال من حيث التكلفة.</strong></p>
<p>أثبتت الحلول الحالية مثل Bookie أنها غير كافية لتلبية احتياجاتنا بسبب تصميم العميل الثقيل وغياب حزم SDKs الجاهزة للإنتاج ل Golang و C++. قادتنا هذه الفجوة التكنولوجية إلى نهجنا الأولي باستخدام قوائم انتظار الرسائل.</p>
<h2 id="Our-Initial-Solution-Message-Queues-as-WAL" class="common-anchor-header">حلنا الأولي: طوابير الرسائل كقائمة انتظار<button data-href="#Our-Initial-Solution-Message-Queues-as-WAL" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>لسد هذه الفجوة، استخدمنا في نهجنا الأولي قوائم انتظار الرسائل (Kafka/Pulsar) كسجل للكتابة المسبقة (WAL). عملت البنية على هذا النحو:</p>
<ul>
<li><p>تتدفق جميع التحديثات الواردة في الوقت الحقيقي من خلال قائمة انتظار الرسائل.</p></li>
<li><p>يتلقى الكتّاب تأكيدًا فوريًا بمجرد قبولها في قائمة انتظار الرسائل.</p></li>
<li><p>تعالج كل من QueryNode و DataNode هذه البيانات بشكل غير متزامن، مما يضمن إنتاجية كتابة عالية مع الحفاظ على حداثة البيانات</p></li>
</ul>
<p>
  <span class="img-wrapper">
    <img translate="no" src="https://assets.zilliz.com/Figure_Milvus_2_0_Architecture_Overview_465f5ba27a.png" alt="" class="doc-image" id="" />
    <span></span>
  </span>
</p>
<p>الشكل: نظرة عامة على بنية ميلفوس 2.0</p>
<p>قدم هذا النظام بشكل فعال تأكيدًا فوريًا للكتابة مع تمكين معالجة البيانات بشكل غير متزامن، وهو أمر بالغ الأهمية للحفاظ على التوازن بين الإنتاجية وحداثة البيانات التي يتوقعها مستخدمو Milvus.</p>
<h2 id="Why-We-Needed-Something-Different-for-WAL" class="common-anchor-header">لماذا احتجنا إلى شيء مختلف لنظام WAL<button data-href="#Why-We-Needed-Something-Different-for-WAL" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>مع الإصدار 2.6 من Milvus، قررنا التخلص التدريجي من قوائم انتظار الرسائل الخارجية لصالح Woodpecker، وهو تطبيق WAL المصمم خصيصًا لهذا الغرض، وهو تطبيق WAL الأصلي في السحابة. لم يكن هذا قرارًا اتخذناه بسهولة. ففي النهاية، كنا قد استخدمنا بنجاح كافكا وبولسار لسنوات.</p>
<p>لم تكن المشكلة في هذه التقنيات في حد ذاتها - فكلاهما نظامان ممتازان يتمتعان بقدرات قوية. وبدلاً من ذلك، جاء التحدي من التعقيد المتزايد والنفقات العامة التي قدمتها هذه الأنظمة الخارجية مع تطور Milvus. ومع ازدياد متطلباتنا التخصصية، استمرت الفجوة بين ما تقدمه قوائم انتظار الرسائل ذات الأغراض العامة وما تحتاجه قاعدة بياناتنا المتجهة في الاتساع.</p>
<p>هناك ثلاثة عوامل محددة دفعتنا في النهاية إلى اتخاذ قرارنا ببناء بديل:</p>
<h3 id="Operational-Complexity" class="common-anchor-header">التعقيد التشغيلي</h3><p>تتطلب الاعتمادات الخارجية مثل Kafka أو Pulsar أجهزة مخصصة ذات عقد متعددة وإدارة دقيقة للموارد. وهذا يخلق العديد من التحديات:</p>
<ul>
<li>زيادة التعقيد التشغيلي</li>
</ul>
<ul>
<li>منحنيات تعلم أكثر حدة لمسؤولي النظام</li>
</ul>
<ul>
<li>ارتفاع مخاطر أخطاء التكوين والثغرات الأمنية</li>
</ul>
<h3 id="Architectural-Constraints" class="common-anchor-header">القيود المعمارية</h3><p>لقوائم انتظار الرسائل مثل كافكا قيود متأصلة على عدد المواضيع المدعومة. لقد طورنا VShard كحل بديل لمشاركة المواضيع عبر المكونات، لكن هذا الحل - على الرغم من تلبيته الفعالة لاحتياجات التوسع - أدى إلى تعقيدات معمارية كبيرة.</p>
<p>جعلت هذه التبعيات الخارجية من الصعب تنفيذ الميزات الهامة - مثل جمع نفايات السجل - وزادت من احتكاك التكامل مع وحدات النظام الأخرى. بمرور الوقت، أصبح عدم التطابق المعماري بين قوائم انتظار الرسائل ذات الأغراض العامة والمتطلبات المحددة عالية الأداء لقاعدة بيانات المتجهات واضحًا بشكل متزايد، مما دفعنا إلى إعادة تقييم خيارات التصميم الخاصة بنا.</p>
<h3 id="Resource-Inefficiency" class="common-anchor-header">عدم كفاءة الموارد</h3><p>يتطلب ضمان التوافر العالي مع أنظمة مثل كافكا وبولسار عادةً</p>
<ul>
<li><p>النشر الموزع عبر عقد متعددة</p></li>
<li><p>تخصيص موارد كبيرة حتى بالنسبة لأحمال العمل الصغيرة</p></li>
<li><p>تخزين الإشارات سريعة الزوال (مثل Timetick من ميلفوس)، والتي لا تتطلب في الواقع الاحتفاظ بها على المدى الطويل</p></li>
</ul>
<p>ومع ذلك، تفتقر هذه الأنظمة إلى المرونة اللازمة لتجاوز الاستمرارية لمثل هذه الإشارات العابرة، مما يؤدي إلى عمليات إدخال/إخراج غير ضرورية واستخدام التخزين. يؤدي هذا إلى زيادة غير متناسبة في الموارد وزيادة التكلفة - خاصةً في البيئات الأصغر حجمًا أو البيئات محدودة الموارد.</p>
<h2 id="Introducing-Woodpecker---A-Cloud-Native-High-Performance-WAL-Engine" class="common-anchor-header">تقديم نقار الخشب - محرك سحابي أصلي عالي الأداء في السحابة<button data-href="#Introducing-Woodpecker---A-Cloud-Native-High-Performance-WAL-Engine" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>في الإصدار 2.6 من Milvus 2.6، استبدلنا Kafka/Pulsar ب <strong>Woodpecker،</strong> وهو نظام WAL مصمم خصيصًا للسحابة. صُمم Woodpecker لتخزين الكائنات، وهو يعمل على تبسيط العمليات مع تعزيز الأداء وقابلية التوسع.</p>
<p>تم تصميم Woodpecker من الألف إلى الياء لتحقيق أقصى قدر من إمكانات التخزين السحابي الأصلي، مع هدف مركّز: أن يصبح حل WAL الأعلى إنتاجية والمُحسّن للبيئات السحابية مع توفير القدرات الأساسية اللازمة لسجل الكتابة الأمامية فقط.</p>
<h3 id="The-Zero-Disk-Architecture-for-Woodpecker" class="common-anchor-header">بنية الأقراص الصفرية لـ Woodpecker</h3><p>يتمثل الابتكار الأساسي ل Woodpecker في <strong>هيكلية</strong> القرص <strong>الصفري</strong>:</p>
<ul>
<li><p>جميع بيانات السجل المخزنة في تخزين الكائنات السحابية (مثل Amazon S3 أو Google Cloud Storage أو Alibaba OS)</p></li>
<li><p>البيانات الوصفية المُدارة من خلال مخازن القيمة الرئيسية الموزعة مثل etcd</p></li>
<li><p>لا توجد تبعيات أقراص محلية للعمليات الأساسية</p></li>
</ul>
<p>
  <span class="img-wrapper">
    <img translate="no" src="https://assets.zilliz.com/Figure_Woodpecker_Architecture_cc31e15ed9.png" alt="" class="doc-image" id="" />
    <span></span>
  </span>
</p>
<p>الشكل:  نظرة عامة على بنية نقار الخشب</p>
<p>يقلل هذا النهج من النفقات التشغيلية بشكل كبير مع زيادة المتانة والكفاءة السحابية إلى أقصى حد. من خلال التخلص من التبعيات المحلية للقرص المحلي، يتماشى Woodpecker تمامًا مع مبادئ السحابة الأصلية ويقلل بشكل كبير من العبء التشغيلي على مسؤولي النظام.</p>
<h3 id="Performance-Benchmarks-Exceeding-Expectations" class="common-anchor-header">معايير الأداء: تجاوز التوقعات</h3><p>أجرينا اختبارات معيارية شاملة لتقييم أداء Woodpecker في إعداد عقدة واحدة وعميل واحد وتدفق سجل واحد. كانت النتائج مبهرة عند مقارنتها مع Kafka وPulsar:</p>
<table>
<thead>
<tr><th><strong>النظام</strong></th><th><strong>كافكا</strong></th><th><strong>بولسار</strong></th><th><strong>WP MinIO</strong></th><th><strong>الفسفور الابيض المحلي</strong></th><th><strong>WP S3</strong></th></tr>
</thead>
<tbody>
<tr><td>الإنتاجية</td><td>129.96 ميجابايت/ثانية</td><td>107 ميجابايت/ثانية</td><td>71 ميجابايت/ثانية</td><td>450 ميجابايت/ثانية</td><td>750 ميجابايت/ثانية</td></tr>
<tr><td>الكمون</td><td>58 مللي ثانية</td><td>35 مللي ثانية</td><td>184 مللي ثانية</td><td>1.8 مللي ثانية</td><td>166 مللي ثانية</td></tr>
</tbody>
</table>
<p>بالنسبة للسياق، قمنا بقياس حدود الإنتاجية النظرية لخلفيات التخزين المختلفة على جهاز الاختبار الخاص بنا:</p>
<ul>
<li><p><strong>MinIO</strong>: 110 ميجابايت/ثانية تقريبًا</p></li>
<li><p><strong>نظام الملفات المحلي</strong>: 600-750 ميجابايت/ثانية</p></li>
<li><p><strong>أمازون S3 (مثيل EC2 واحد)</strong>: ما يصل إلى 1.1 جيجابايت/ثانية</p></li>
</ul>
<p>من اللافت للنظر أن Woodpecker حقق باستمرار 60-80% من أقصى إنتاجية ممكنة لكل واجهة خلفية - وهو مستوى كفاءة استثنائي للبرامج الوسيطة.</p>
<h4 id="Key-Performance-Insights" class="common-anchor-header">رؤى الأداء الرئيسية</h4><ol>
<li><p><strong>وضع نظام الملفات المحلي</strong>: حقق Woodpecker سرعة 450 ميغابايت/ثانية - أسرع من Kafka بمعدل 3.5 أضعاف وأسرع من Pulsar بمعدل 4.2 أضعاف - مع زمن انتقال منخفض للغاية يبلغ 1.8 مللي ثانية فقط، مما يجعله مثاليًا لعمليات النشر عالية الأداء للعقدة الواحدة.</p></li>
<li><p><strong>وضع التخزين السحابي (S3)</strong>: عند الكتابة مباشرةً إلى S3، وصلت سرعة Woodpecker إلى 750 ميجابايت/ثانية (حوالي 68% من الحد النظري لـ S3)، أي أعلى بـ 5.8 ضعف من Kafka و7 أضعاف من Pulsar. في حين أن زمن الاستجابة أعلى (166 مللي ثانية)، يوفر هذا الإعداد إنتاجية استثنائية لأحمال العمل الموجهة نحو الدُفعات.</p></li>
<li><p><strong>وضع تخزين الكائنات (MinIO)</strong>: حتى مع MinIO، حقق Woodpecker 71 ميغابايت/ثانية - حوالي 65% من سعة MinIO. هذا الأداء مماثل لأداء Kafka وPulsar ولكن بمتطلبات موارد أقل بكثير.</p></li>
</ol>
<p>تم تحسين Woodpecker بشكل خاص للكتابات المتزامنة ذات الحجم الكبير حيث يكون الحفاظ على النظام أمرًا بالغ الأهمية. وتعكس هذه النتائج فقط المراحل المبكرة من التطوير - من المتوقع أن تؤدي التحسينات الجارية في دمج الإدخال/الإخراج، والتخزين المؤقت الذكي، والجلب المسبق إلى دفع الأداء إلى حدود نظرية أكبر.</p>
<h3 id="Design-Goals" class="common-anchor-header">أهداف التصميم</h3><p>يعالج Woodpecker المتطلبات المتطورة لأعباء عمل البحث المتجه في الوقت الحقيقي من خلال هذه المتطلبات التقنية الرئيسية:</p>
<ul>
<li><p>استيعاب بيانات عالية الإنتاجية مع ثبات دائم عبر منطقة التوفر</p></li>
<li><p>قراءات لاحقة منخفضة الكمون للاشتراكات في الوقت الفعلي وقراءات عالية الإنتاجية لاسترداد البيانات في حالة الفشل</p></li>
<li><p>خلفيات تخزين قابلة للتوصيل، بما في ذلك تخزين الكائنات السحابية وأنظمة الملفات مع دعم بروتوكول NFS</p></li>
<li><p>خيارات نشر مرنة، تدعم كلاً من الإعدادات المستقلة خفيفة الوزن والمجموعات واسعة النطاق لعمليات نشر Milvus متعددة المستأجرين</p></li>
</ul>
<h3 id="Architecture-Components" class="common-anchor-header">مكونات البنية</h3><p>يتضمن النشر القياسي ل Woodpecker المكونات التالية.</p>
<ul>
<li><p><strong>العميل</strong> - طبقة واجهة لإصدار طلبات القراءة والكتابة</p></li>
<li><p><strong>LogStore</strong> - يدير التخزين المؤقت للكتابة عالية السرعة، والتحميل غير المتزامن إلى التخزين، وضغط السجل</p></li>
<li><p><strong>واجهة التخزين الخلفية</strong> - تدعم خدمات تخزين قابلة للتطوير ومنخفضة التكلفة مثل S3 و GCS وأنظمة الملفات مثل EFS</p></li>
<li><p><strong>ETCD</strong> - تخزين البيانات الوصفية وتنسيق حالة السجل عبر العُقد الموزعة</p></li>
</ul>
<h3 id="Flexible-Deployments-to-Match-Your-Specific-Needs" class="common-anchor-header">عمليات نشر مرنة لتتناسب مع احتياجاتك الخاصة</h3><p>يوفر Woodpecker وضعين للنشر لمطابقة احتياجاتك الخاصة:</p>
<p><strong>وضع MemoryBuffer Mode - خفيف الوزن وخالي من الصيانة</strong></p>
<p>يوفر وضع MemoryBuffer Mode خيار نشر بسيط وخفيف الوزن حيث يقوم Woodpecker بتخزين الكتابات الواردة مؤقتًا في الذاكرة ويقوم بمسحها بشكل دوري إلى خدمة تخزين الكائنات السحابية. تتم إدارة البيانات الوصفية باستخدام إلخd لضمان الاتساق والتنسيق. هذا الوضع هو الأنسب لأحمال العمل ذات الدُفعات الثقيلة في عمليات النشر الأصغر حجمًا أو بيئات الإنتاج التي تعطي الأولوية للبساطة على الأداء، خاصةً عندما لا يكون زمن انتقال الكتابة المنخفض أمرًا بالغ الأهمية.</p>
<p>
  <span class="img-wrapper">
    <img translate="no" src="https://assets.zilliz.com/Figure_The_memory_Buffer_Mode_3429d693a1.png" alt="" class="doc-image" id="" />
    <span></span>
  </span>
</p>
<p><em>الشكل: وضع مخزن الذاكرة</em></p>
<p><strong>وضع QuorumBuffer - مُحسَّن لعمليات النشر ذات الكمون المنخفض والمتانة العالية</strong></p>
<p>تم تصميم وضع QuorumBuffer Mode من أجل أعباء عمل القراءة/الكتابة الحساسة لزمن الاستجابة الحساسة لزمن الاستجابة وعالية التردد والتي تتطلب استجابة في الوقت الحقيقي وتحملاً قوياً للأخطاء. في هذا الوضع، يعمل Woodpecker كمخزن مؤقت للكتابة عالي السرعة مع ثلاث نسخ للكتابة النصابية، مما يضمن اتساقاً قوياً وتوافرًا عاليًا.</p>
<p>تُعتبر الكتابة ناجحة بمجرد نسخها إلى عقدتين على الأقل من العقد الثلاث، وعادةً ما تكتمل في غضون جزء من الثانية من خانة واحدة، وبعد ذلك يتم مسح البيانات بشكل غير متزامن إلى تخزين الكائنات السحابية لضمان المتانة على المدى الطويل. تقلل هذه البنية من الحالة على العقدة، وتلغي الحاجة إلى وحدات تخزين الأقراص المحلية الكبيرة، وتتجنب الإصلاحات المعقدة المضادة للإنتروبيا التي غالباً ما تكون مطلوبة في الأنظمة التقليدية القائمة على النصاب.</p>
<p>والنتيجة هي طبقة WAL مبسطة وقوية ومثالية لبيئات الإنتاج ذات المهام الحرجة حيث يكون الاتساق والتوافر والاسترداد السريع ضروريًا.</p>
<p>
  <span class="img-wrapper">
    <img translate="no" src="https://assets.zilliz.com/Figure_The_Quorum_Buffer_Mode_72573dc666.png" alt="" class="doc-image" id="" />
    <span></span>
  </span>
</p>
<p><em>الشكل: وضع QuorumBuffer</em></p>
<h2 id="StreamingService-Built-for-Real-Time-Data-Flow" class="common-anchor-header">StreamingService: مصممة لتدفق البيانات في الوقت الحقيقي<button data-href="#StreamingService-Built-for-Real-Time-Data-Flow" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>بالإضافة إلى Woodpecker، يقدم Milvus 2.6 <strong>خدمة StreamingService - وهو</strong>مكون متخصص مصمم لإدارة السجلات، واستيعاب السجلات، والاشتراك في تدفق البيانات.</p>
<p>لفهم كيفية عمل بنيتنا الجديدة، من المهم توضيح العلاقة بين هذين المكونين:</p>
<ul>
<li><p><strong>نقار الخشب</strong> هو طبقة التخزين التي تتعامل مع الثبات الفعلي للسجلات التي يتم كتابتها مسبقًا، مما يوفر المتانة والموثوقية</p></li>
<li><p><strong>StreamingService</strong> هي طبقة الخدمة التي تدير عمليات السجل وتوفر إمكانات تدفق البيانات في الوقت الفعلي</p></li>
</ul>
<p>يشكلان معاً بديلاً كاملاً لقوائم انتظار الرسائل الخارجية. توفر Woodpecker أساس التخزين الدائم، بينما توفر StreamingService الوظائف عالية المستوى التي تتفاعل معها التطبيقات مباشرة. يسمح هذا الفصل بين الاهتمامات بتحسين كل مكون لدوره المحدد بينما يعملان معاً بسلاسة كنظام متكامل.</p>
<h3 id="Adding-Streaming-Service-to-Milvus-26" class="common-anchor-header">إضافة خدمة البث إلى ميلفوس 2.6</h3><p>
  <span class="img-wrapper">
    <img translate="no" src="https://assets.zilliz.com/Figure_Milvus_2_6_Architecture_Overview_238428c58f.png" alt="" class="doc-image" id="" />
    <span></span>
  </span>
</p>
<p>الشكل: خدمة البث المضافة في بنية ميلفوس 2.6</p>
<p>تتكون خدمة البث من ثلاثة مكونات أساسية:</p>
<p><strong>منسق البث</strong></p>
<ul>
<li><p>يكتشف عُقد البث المتاحة من خلال مراقبة جلسات ميلفوس ETCD</p></li>
<li><p>يدير حالة WALs ويجمع مقاييس موازنة التحميل من خلال خدمة ManagerService.</p></li>
</ul>
<p><strong>عميل البث</strong></p>
<ul>
<li><p>الاستعلام عن AssignmentService لتحديد توزيع مقاطع WAL عبر عُقد البث</p></li>
<li><p>ينفذ عمليات القراءة/الكتابة عبر خدمة المعالج على عقدة البث المناسبة</p></li>
</ul>
<p><strong>عقدة البث</strong></p>
<ul>
<li><p>يتعامل مع عمليات WAL الفعلية ويوفر إمكانيات نشر الاشتراك لبث البيانات في الوقت الفعلي</p></li>
<li><p>تتضمن <strong>خدمة ManagerService</strong> لإدارة WAL وإعداد تقارير الأداء</p></li>
<li><p>يتميز بخدمة <strong>المعالج</strong> التي تنفذ آليات نشر-اشتراك فعالة لإدخالات WAL</p></li>
</ul>
<p>تسمح هذه البنية متعددة الطبقات ل Milvus بالحفاظ على فصل واضح بين وظيفة التدفق (الاشتراك والمعالجة في الوقت الحقيقي) وآليات التخزين الفعلية. يتعامل نقار الخشب مع "كيفية" تخزين السجل، بينما تدير خدمة الدفق "ماذا" و"متى" عمليات السجل.</p>
<p>ونتيجة لذلك، تعمل خدمة البث على تعزيز قدرات الوقت الحقيقي لـ Milvus بشكل كبير من خلال تقديم دعم الاشتراك الأصلي، مما يلغي الحاجة إلى قوائم انتظار الرسائل الخارجية. يقلل من استهلاك الذاكرة من خلال دمج ذاكرات التخزين المؤقت المكررة سابقًا في مسارات الاستعلام والبيانات، ويقلل من زمن الاستجابة للقراءات المتسقة بقوة عن طريق إزالة التأخير في المزامنة غير المتزامنة، ويحسن كلاً من قابلية التوسع وسرعة الاسترداد عبر النظام.</p>
<h2 id="Conclusion---Streaming-on-a-Zero-Disk-Architecture" class="common-anchor-header">الخاتمة - التدفق على بنية خالية من الأقراص<button data-href="#Conclusion---Streaming-on-a-Zero-Disk-Architecture" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>إدارة الحالة أمر صعب. غالبًا ما تضحي الأنظمة ذات الحالة بالمرونة وقابلية التوسع. الحل المقبول بشكل متزايد في التصميم السحابي الأصلي هو فصل الحالة عن الحوسبة - مما يسمح لكل منهما بالتوسع بشكل مستقل.</p>
<p>فبدلاً من إعادة اختراع العجلة، نقوم بتفويض تعقيدات التخزين الدائم والقابل للتطوير إلى فرق هندسية عالمية المستوى وراء خدمات مثل AWS S3 و Google Cloud Storage و MinIO. من بين هذه الخدمات، تتميز S3 بسعتها غير المحدودة تقريبًا، ومتانتها التي تصل إلى أحد عشر تسعات (99.999999999%)، وتوافرها بنسبة 99.99%، وأداء القراءة/الكتابة عالي الإنتاجية.</p>
<p>ولكن حتى البنى "الخالية من الأقراص" لها مقايضات. لا تزال مخازن الكائنات تعاني من الكمون العالي في الكتابة وعدم كفاءة الملفات الصغيرة - وهي قيود لا تزال دون حل في العديد من أعباء العمل في الوقت الحقيقي.</p>
<p>بالنسبة لقواعد البيانات المتجهة - خاصةً تلك التي تدعم المهام الحرجة RAG، ووكلاء الذكاء الاصطناعي، وأعباء عمل البحث ذات الكمون المنخفض - فإن الوصول في الوقت الحقيقي والكتابة السريعة غير قابل للتفاوض. لهذا السبب قمنا بإعادة تصميم Milvus حول Woodpecker وخدمة البث. يعمل هذا التحول على تبسيط النظام بشكل عام (دعنا نواجه الأمر - لا أحد يريد الاحتفاظ بمكدس بولسار كامل داخل قاعدة بيانات متجهة)، ويضمن بيانات أحدث، ويحسن كفاءة التكلفة، ويسرّع عملية استرداد الأعطال.</p>
<p>نحن نعتقد أن Woodpecker أكثر من مجرد مكون من مكونات Milvus - يمكن أن يكون بمثابة لبنة أساسية لأنظمة أخرى سحابية أصلية. ومع تطور البنية التحتية السحابية، قد تقربنا ابتكارات مثل S3 Express من تحقيق المثل الأعلى: المتانة عبر المنطقة مع زمن استجابة للكتابة لا يتجاوز جزء من الثانية.</p>
<h2 id="Getting-Started-with-Milvus-26" class="common-anchor-header">الشروع في العمل مع Milvus 2.6<button data-href="#Getting-Started-with-Milvus-26" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>يتوفر Milvus 2.6 الآن. بالإضافة إلى Woodpecker، فإنه يقدم العشرات من الميزات الجديدة وتحسينات الأداء مثل التخزين المتدرج، وطريقة التكميم RabbitQ، والبحث المحسّن عن النص الكامل والتعددية المحسّنة، مما يعالج مباشرةً التحديات الأكثر إلحاحًا في البحث المتجه اليوم: التوسع بكفاءة مع الحفاظ على التكاليف تحت السيطرة.</p>
<p>هل أنت مستعد لاستكشاف كل ما يقدمه Milvus؟ تعمق في<a href="https://milvus.io/docs/release_notes.md"> ملاحظات الإصدار،</a> أو تصفح<a href="https://milvus.io/docs"> الوثائق الكاملة،</a> أو اطلع على<a href="https://milvus.io/blog"> مدونات الميزات</a> الخاصة بنا.</p>
<p>هل لديك أسئلة؟ نرحب بك أيضًا للانضمام إلى <a href="https://discord.com/invite/8uyFbECzPX">مجتمع Discord</a> الخاص بنا أو تقديم مشكلة على<a href="https://github.com/milvus-io/milvus"> GitHub</a> - نحن هنا لمساعدتك في تحقيق أقصى استفادة من الإصدار Milvus 2.6.</p>

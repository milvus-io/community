---
id: milvus-performance-AVX-512-vs-AVX2.md
title: ما هي ملحقات المتجهات المتقدمة؟
author: milvus
date: 2020-11-10T22:15:39.156Z
desc: >-
  اكتشف كيف يعمل برنامج Milvus على AVX-512 مقابل AVX2 باستخدام مجموعة متنوعة من
  الفهارس المتجهة المختلفة.
cover: assets.zilliz.com/header_milvus_performance_avx_512_vs_avx2_2c9f14ef96.png
tag: Engineering
canonicalUrl: 'https://zilliz.com/blog/milvus-performance-AVX-512-vs-AVX2'
---
<custom-h1>أداء Milvus على AVX-512 مقابل AVX2</custom-h1><p>الآلات الذكية الواعية التي ترغب في السيطرة على العالم هي عنصر ثابت في الخيال العلمي، ولكن في الواقع أجهزة الكمبيوتر الحديثة مطيعة للغاية. فنادرًا ما تعرف ما يجب أن تفعله بنفسها دون أن يُطلب منها ذلك. تؤدي أجهزة الكمبيوتر المهام بناءً على التعليمات أو الأوامر المرسلة من برنامج إلى المعالج. وفي أدنى مستوياتها، تكون كل تعليمات عبارة عن تسلسل من الآحاد والأصفار التي تصف عملية يقوم الحاسوب بتنفيذها. وعادةً ما تتوافق كل عبارة بلغة الآلة في لغات تجميع الحاسوب مع تعليمات المعالج. تعتمد وحدة المعالجة المركزية (CPU) على التعليمات لإجراء العمليات الحسابية وأنظمة التحكم. بالإضافة إلى ذلك، غالبًا ما يتم قياس أداء وحدة المعالجة المركزية من حيث القدرة على تنفيذ التعليمات (على سبيل المثال، وقت التنفيذ).</p>
<h2 id="What-are-Advanced-Vector-Extensions" class="common-anchor-header">ما هي ملحقات المتجهات المتقدمة؟<button data-href="#What-are-Advanced-Vector-Extensions" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>ملحقات المتجهات المتقدمة (AVX) هي مجموعة تعليمات للمعالجات الدقيقة التي تعتمد على عائلة x86 من مجموعة معماريات مجموعة التعليمات. تم اقتراح AVX لأول مرة من قِبل Intel في مارس 2008، وشهد AVX دعمًا واسعًا بعد ثلاث سنوات مع إطلاق Sandy Bridge - وهي بنية مصغرة مستخدمة في الجيل الثاني من معالجات Intel Core (مثل Core i7 و i5 و i3) - وبنية AMD المصغرة المنافسة التي تم إصدارها أيضًا في عام 2011، Bulldozer.</p>
<p>قدم AVX مخطط ترميز جديد وميزات جديدة وتعليمات جديدة. يوسع AVX2 معظم عمليات الأعداد الصحيحة إلى 256 بت ويقدم عمليات المضاعفة والتجميع المدمجة (FMA). يعمل AVX-512 على توسيع نطاق عمليات AVX إلى 512 بت باستخدام ترميز بادئة جديدة لملحق المتجه المحسّن (EVEX).</p>
<p><a href="https://milvus.io/docs">Milvus</a> هي قاعدة بيانات متجهات مفتوحة المصدر مصممة للبحث عن التشابه وتطبيقات الذكاء الاصطناعي (AI). تدعم المنصة مجموعة تعليمات AVX-512، مما يعني أنه يمكن استخدامها مع جميع وحدات المعالجة المركزية التي تتضمن تعليمات AVX-512. تمتلك Milvus تطبيقات واسعة تشمل أنظمة التوصية والرؤية الحاسوبية ومعالجة اللغات الطبيعية (NLP) وغيرها. تعرض هذه المقالة نتائج الأداء وتحليل قاعدة بيانات Milvus المتجهة على AVX-512 و AVX2.</p>
<h2 id="Milvus-performance-on-AVX-512-vs-AVX2" class="common-anchor-header">أداء برنامج Milvus على AVX-512 مقابل AVX2<button data-href="#Milvus-performance-on-AVX-512-vs-AVX2" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><h3 id="System-configuration" class="common-anchor-header">تكوين النظام</h3><ul>
<li>وحدة المعالجة المركزية: وحدة المعالجة المركزية Intel® Platinum 8163 @ 2.50 جيجا هرتز 24 نواة 48 سنون</li>
<li>عدد وحدات المعالجة المركزية: 2</li>
<li>بطاقة الرسومات، بطاقة GeForce RTX 2080Ti بسعة 11 جيجابايت 4 بطاقات</li>
<li>الذاكرة: 768 جيجابايت</li>
<li>القرص: 2 تيرابايت SSD</li>
</ul>
<h3 id="Milvus-parameters" class="common-anchor-header">معلمات ميلفوس</h3><ul>
<li>cahce.cahe_size: 25، حجم ذاكرة وحدة المعالجة المركزية المستخدمة للتخزين المؤقت للبيانات من أجل استعلام أسرع.</li>
<li>nlist: 4096</li>
<li>nprobe: 128</li>
</ul>
<p>ملاحظة: <code translate="no">nlist</code> هي معلمة الفهرسة التي يتم إنشاؤها من العميل؛ <code translate="no">nprobe</code> معلمة البحث. يستخدم كلٌ من IVF_FLAT و IVF_SQ8 خوارزمية تجميع لتقسيم عدد كبير من المتجهات إلى دلاء، <code translate="no">nlist</code> هو العدد الإجمالي للدلاء المراد تقسيمها أثناء التجميع. الخطوة الأولى في الاستعلام هي العثور على عدد الدلاء الأقرب إلى المتجه الهدف، والخطوة الثانية هي العثور على المتجهات الأعلى-ك في هذه الدلاء من خلال مقارنة المسافة بين المتجهات. <code translate="no">nprobe</code> يشير إلى عدد الدلاء في الخطوة الأولى.</p>
<h3 id="Dataset-SIFT10M-dataset" class="common-anchor-header">مجموعة البيانات: مجموعة بيانات SIFT10M</h3><p>تستخدم هذه الاختبارات <a href="https://archive.ics.uci.edu/ml/datasets/SIFT10M">مجموعة بيانات SIFT10M،</a> والتي تحتوي على مليون متجه ذي 128 بُعدًا وغالبًا ما تُستخدم لتحليل أداء طرق البحث الأقرب من الجوار المقابلة. ستتم مقارنة وقت البحث من الدرجة الأولى لـ nq = [1، 10، 100، 500، 1000] بين مجموعتي التعليمات.</p>
<h3 id="Results-by-vector-index-type" class="common-anchor-header">النتائج حسب نوع فهرس المتجهات</h3><p><a href="https://zilliz.com/blog/Accelerating-Similarity-Search-on-Really-Big-Data-with-Vector-Indexing">الفهارس</a> المتجهة هي هياكل بيانات فعالة من حيث الوقت والمساحة مبنية على الحقل المتجه لمجموعة ما باستخدام نماذج رياضية مختلفة. تسمح فهرسة المتجهات بالبحث في مجموعات البيانات الكبيرة بكفاءة عند محاولة تحديد المتجهات المتشابهة لمتجه الإدخال. ونظرًا لطبيعة الاسترجاع الدقيق التي تستغرق وقتًا طويلاً، فإن معظم أنواع الفهارس <a href="https://milvus.io/docs/v2.0.x/index.md#CPU">التي يدعمها ميلفوس</a> تستخدم البحث التقريبي لأقرب جار (ANN).</p>
<p>بالنسبة لهذه الاختبارات، تم استخدام ثلاثة فهارس مع AVX-512 و AVX2: IVF_FLAT و IVF_SQ8 و HNSW.</p>
<h3 id="IVFFLAT" class="common-anchor-header">IVF_FLAT</h3><p>الملف المقلوب (IVF_FLAT) هو نوع فهرس يعتمد على التكميم. إنه فهرس IVF الأساسي، وتكون البيانات المشفرة المخزنة في كل وحدة متسقة مع البيانات الأصلية. يقسم الفهرس بيانات المتجه إلى عدد من وحدات العنقود (nlist)، ثم يقارن المسافات بين متجه الإدخال الهدف ومركز كل عنقود. اعتمادًا على عدد المجموعات التي تم تعيين النظام للاستعلام عنها (nprobe)، يتم إرجاع نتائج بحث التشابه بناءً على المقارنات بين المدخلات المستهدفة والمتجهات في المجموعة (المجموعات) الأكثر تشابهًا فقط - مما يقلل وقت الاستعلام بشكل كبير. من خلال ضبط nprobe، يمكن إيجاد توازن مثالي بين الدقة والسرعة لسيناريو معين.</p>
<p><strong>نتائج الأداء</strong> <span class="img-wrapper"> <img translate="no" src="https://assets.zilliz.com/IVF_FLAT_3688377fc8.png" alt="IVF_FLAT.png" class="doc-image" id="ivf_flat.png" /><span>IVF_FLAT.png</span> </span></p>
<h3 id="IVFSQ8" class="common-anchor-header">IVF_SQ8</h3><p>لا يقوم IVF_FLAT بإجراء أي ضغط، لذا فإن ملفات الفهرس التي ينتجها تكون بنفس حجم البيانات المتجهة الأصلية غير المفهرسة تقريبًا. عندما تكون موارد ذاكرة القرص أو وحدة المعالجة المركزية أو وحدة معالجة الرسومات محدودة، فإن IVF_SQ8 هو خيار أفضل من IVF_FLAT. يمكن لهذا النوع من الفهرس تحويل كل بُعد من المتجه الأصلي من رقم عائم ذو أربع بايتات إلى عدد صحيح غير مرقم ذو بايت واحد من خلال إجراء تكميم قياسي. يقلل هذا من استهلاك القرص ووحدة المعالجة المركزية وذاكرة وحدة معالجة الرسومات بنسبة 70-75%.</p>
<p><strong>نتائج الأداء</strong> <span class="img-wrapper"> <img translate="no" src="https://assets.zilliz.com/IVF_SQ_8_bed28307f7.png" alt="IVF_SQ8.png" class="doc-image" id="ivf_sq8.png" /><span>IVF_SQ8.png</span> </span></p>
<h3 id="HNSW" class="common-anchor-header">HNSW</h3><p>الرسم البياني الهرمي للعالم الصغير (HNSW) عبارة عن خوارزمية فهرسة قائمة على الرسم البياني. تبدأ الاستعلامات في الطبقة العليا من خلال العثور على العقدة الأقرب إلى الهدف، ثم تنتقل إلى الطبقة التالية لجولة أخرى من البحث. بعد عدة تكرارات، يمكن أن تقترب بسرعة من الموضع المستهدف.</p>
<p><strong>نتائج الأداء</strong> <span class="img-wrapper"> <img translate="no" src="https://assets.zilliz.com/HNSW_52aba39214.png" alt="HNSW.png" class="doc-image" id="hnsw.png" /><span>HNSW.png</span> </span></p>
<h2 id="Comparing-vector-indexes" class="common-anchor-header">مقارنة فهارس المتجهات<button data-href="#Comparing-vector-indexes" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>يكون استرجاع المتجهات أسرع باستمرار على مجموعة تعليمات AVX-512 مقارنةً بـ AVX2. ويرجع ذلك إلى أن AVX-512 يدعم حساب 512 بت، مقارنةً بحساب 256 بت فقط على AVX2. من الناحية النظرية، يجب أن يكون AVX-512 أسرع بمرتين من AVX2، ومع ذلك، فإن Milvus يقوم بمهام أخرى تستغرق وقتًا طويلاً بالإضافة إلى حسابات تشابه المتجهات. من غير المرجح أن يكون وقت الاسترجاع الإجمالي لـ AVX-512 أقصر بمرتين من AVX2 في سيناريوهات العالم الحقيقي. <span class="img-wrapper"> <img translate="no" src="https://assets.zilliz.com/comparison_a64b92f1dd.png" alt="comparison.png" class="doc-image" id="comparison.png" /><span>مقارنة. png</span> </span></p>
<p>الاسترجاع أسرع بكثير على فهرس HNSW من الفهرسين الآخرين، في حين أن استرجاع IVF_SQ8 أسرع قليلاً من استرجاع IVF_SQ8 على كلا مجموعتي التعليمات. ويرجع ذلك على الأرجح إلى أن IVF_SQ8 يتطلب 25% فقط من الذاكرة التي يحتاجها IVF_SQL8. يقوم IVF_SQ8 بتحميل بايت واحد لكل بُعد متجه، بينما يقوم IVF_SQ8 بتحميل 4 بايت لكل بُعد متجه. من المرجح أن يكون الوقت اللازم للحساب مقيدًا بعرض النطاق الترددي للذاكرة. ونتيجة لذلك، لا يستهلك IVF_SQ8 مساحة أقل فحسب، بل يتطلب أيضًا وقتًا أقل لاسترجاع المتجهات.</p>
<h2 id="Milvus-is-a-versatile-high-performance-vector-database" class="common-anchor-header">ميلفوس هو قاعدة بيانات متجهات متعددة الاستخدامات وعالية الأداء<button data-href="#Milvus-is-a-versatile-high-performance-vector-database" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>توضح الاختبارات المقدمة في هذه المقالة أن Milvus يقدم أداءً ممتازًا على كل من مجموعتي تعليمات AVX-512 و AVX2 باستخدام فهارس مختلفة. بغض النظر عن نوع الفهرس، فإن أداء Milvus أفضل على AVX-512.</p>
<p>يتوافق Milvus مع مجموعة متنوعة من منصات التعلم العميق ويستخدم في تطبيقات الذكاء الاصطناعي المتنوعة. تم إصدار <a href="https://zilliz.com/news/lfaidata-launches-milvus-2.0-an-advanced-cloud-native-vector-database-built-for-ai">Milvus 2.0،</a> وهو نسخة معاد تصورها من قاعدة البيانات المتجهة الأكثر شيوعًا في العالم، بموجب ترخيص مفتوح المصدر في يوليو 2021. لمزيد من المعلومات عن المشروع، اطلع على المصادر التالية:</p>
<ul>
<li>ابحث عن أو ساهم في Milvus على <a href="https://github.com/milvus-io/milvus/">GitHub</a>.</li>
<li>تفاعل مع المجتمع عبر <a href="https://join.slack.com/t/milvusio/shared_invite/zt-e0u4qu3k-bI2GDNys3ZqX1YCJ9OM~GQ">Slack</a>.</li>
<li>تواصل معنا على <a href="https://twitter.com/milvusio">تويتر</a>.</li>
</ul>

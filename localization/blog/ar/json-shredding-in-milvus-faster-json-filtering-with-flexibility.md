---
id: json-shredding-in-milvus-faster-json-filtering-with-flexibility.md
title: 'تمزيق JSON في Milvus: تصفية JSON أسرع ب 88.9 مرة مع المرونة'
author: Jack Zhang
date: 2025-12-04T00:00:00.000Z
cover: assets.zilliz.com/Milvus_Week_JSON_Shredding_cover_829a12b086.png
tag: Engineering
recommend: false
publishToMedium: true
tags: 'Milvus, vector database'
meta_keywords: 'Milvus, JSON Shredding, JSON performance, columnar storage'
meta_title: |
  Milvus JSON Shredding: Faster JSON Filtering With Flexibility
desc: >-
  اكتشف كيف يستخدم Milvus JSON Shredding التخزين العمودي المحسّن لتسريع
  استعلامات JSON بنسبة تصل إلى 89× مع الحفاظ على المرونة الكاملة للمخطط.
origin: >-
  https://milvus.io/blog/json-shredding-in-milvus-faster-json-filtering-with-flexibility.md
---
<p>تنتج أنظمة الذكاء الاصطناعي الحديثة بيانات JSON شبه منظمة أكثر من أي وقت مضى. حيث يتم ضغط معلومات العملاء والمنتجات في كائن JSON، وتبعث الخدمات المصغرة سجلات JSON عند كل طلب، وتقوم أجهزة إنترنت الأشياء ببث قراءات أجهزة الاستشعار في حمولات JSON خفيفة الوزن، كما أن تطبيقات الذكاء الاصطناعي اليوم تعتمد بشكل متزايد على JSON للإخراج المنظم. والنتيجة هي فيض من البيانات الشبيهة ب JSON التي تتدفق إلى قواعد البيانات المتجهة.</p>
<p>تقليديًا، هناك طريقتان للتعامل مع مستندات JSON:</p>
<ul>
<li><p><strong>التعريف المسبق لكل حقل من حقول JSON في مخطط ثابت وإنشاء فهرس:</strong> يوفر هذا النهج أداءً قويًا في الاستعلام، لكنه جامد. بمجرد أن يتغير تنسيق البيانات، فإن كل حقل جديد أو معدل يؤدي إلى جولة أخرى من تحديثات لغة تعريف البيانات (DDL) المؤلمة وترحيلات المخطط.</p></li>
<li><p><strong>قم بتخزين كائن JSON بأكمله كعمود واحد (يستخدم كل من نوع JSON والمخطط الديناميكي في Milvus هذا النهج):</strong> يوفر هذا الخيار مرونة ممتازة، ولكن على حساب أداء الاستعلام. يتطلب كل طلب تحليل JSON في وقت التشغيل وغالبًا ما يتطلب مسحًا كاملاً للجدول، مما يؤدي إلى زمن استجابة يرتفع مع نمو مجموعة البيانات.</p></li>
</ul>
<p>كانت هذه معضلة المرونة والأداء.</p>
<p>ليس بعد الآن مع ميزة JSON Shredding التي تم تقديمها حديثًا في <a href="https://milvus.io/">Milvus</a>.</p>
<p>مع تقديم خاصية <a href="https://milvus.io/docs/json-shredding.md">JSON Sh</a>redding، تحقق Milvus الآن مرونة خالية من المخططات مع أداء التخزين العمودي، مما يجعل البيانات شبه المهيكلة واسعة النطاق مرنة وسهلة الاستعلام.</p>
<h2 id="How-JSON-Shredding-Works" class="common-anchor-header">كيف يعمل تمزيق JSON<button data-href="#How-JSON-Shredding-Works" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>يؤدي تمزيق JSON إلى تسريع استعلامات JSON من خلال تحويل مستندات JSON المستندة إلى صف إلى تخزين عمودي مُحسَّن للغاية. يحافظ Milvus على مرونة JSON لنمذجة البيانات مع تحسين التخزين العمودي تلقائيًا - مما يحسن بشكل كبير من الوصول إلى البيانات وأداء الاستعلام.</p>
<p>للتعامل مع حقول JSON المتناثرة أو النادرة بكفاءة، يحتوي Milvus أيضًا على فهرس مقلوب للمفاتيح المشتركة. يحدث كل هذا بشفافية للمستخدمين: يمكنك إدراج مستندات JSON كالمعتاد، وترك الأمر ل Milvus لإدارة استراتيجية التخزين والفهرسة المثلى داخليًا.</p>
<p>عندما يتلقى Milvus سجلات JSON الخام بأشكال وهياكل مختلفة، فإنه يحلل كل مفتاح JSON لمعرفة نسبة حدوثه واستقرار نوعه (ما إذا كان نوع بياناته متناسقًا عبر المستندات). بناءً على هذا التحليل، يتم تصنيف كل مفتاح إلى واحدة من ثلاث فئات:</p>
<ul>
<li><p><strong>المفاتيح المكتوبة:</strong> المفاتيح التي تظهر في معظم المستندات ولها دائمًا نفس نوع البيانات (على سبيل المثال، جميع الأعداد الصحيحة أو جميع السلاسل).</p></li>
<li><p>مفاتيح<strong>ديناميكية</strong>: المفاتيح التي تظهر بشكل متكرر ولكن لها أنواع بيانات مختلطة (على سبيل المثال، أحيانًا سلسلة وأحيانًا عدد صحيح).</p></li>
<li><p><strong>مفاتيح مشتركة:</strong> مفاتيح غير متكررة أو متناثرة أو متداخلة تقل عن حد التردد القابل للتكوين.</p></li>
</ul>
<p>يتعامل ميلفوس مع كل فئة بشكل مختلف لتحقيق أقصى قدر من الكفاءة:</p>
<ul>
<li><p>تُخزَّن<strong>المفاتيح المكتوبة</strong> في أعمدة مخصصة وقوية الكتابة.</p></li>
<li><p>أما<strong>المفاتيح الديناميكية</strong> فتوضع في أعمدة ديناميكية بناءً على نوع القيمة الفعلية التي تمت ملاحظتها في وقت التشغيل.</p></li>
<li><p>يتم تخزين كل من الأعمدة المكتوبة والديناميكية في تنسيقات أعمدة السهم/الباركيه للمسح السريع وتنفيذ الاستعلامات المحسّنة للغاية.</p></li>
<li><p>يتم دمج<strong>المفاتيح المشتركة</strong> في عمود ثنائي JSON مضغوط، مصحوبًا بفهرس مقلوب للمفتاح المشترك. يعمل هذا الفهرس على تسريع الاستعلامات على الحقول ذات التردد المنخفض عن طريق تشذيب الصفوف غير ذات الصلة في وقت مبكر وحصر البحث في تلك المستندات التي تحتوي على المفتاح المطلوب فقط.</p></li>
</ul>
<p>يشكل هذا المزيج من التخزين العمودي التكيفي والفهرسة المقلوبة جوهر آلية تمزيق JSON في Milvus، مما يتيح المرونة والأداء العالي على نطاق واسع.</p>
<p>سير العمل الكلي موضح أدناه:</p>
<p>
  <span class="img-wrapper">
    <img translate="no" src="https://assets.zilliz.com/json_shredding_79a62a9661.PNG" alt="" class="doc-image" id="" />
    <span></span>
  </span>
</p>
<p>والآن بعد أن قمنا بتغطية أساسيات كيفية عمل تمزيق JSON Shredding، دعونا نلقي نظرة فاحصة على القدرات الرئيسية التي تجعل هذا النهج مرنًا وعالي الأداء.</p>
<h3 id="Shredding-and-Columnarization" class="common-anchor-header">التقطيع والتقطيع العمودي</h3><p>عندما تتم كتابة مستند JSON جديد، يقوم Milvus بتقسيمه وإعادة تنظيمه إلى تخزين عمودي محسّن:</p>
<ul>
<li><p>يتم تحديد المفاتيح المكتوبة والديناميكية تلقائيًا وتخزينها في أعمدة مخصصة.</p></li>
<li><p>إذا كان مستند JSON يحتوي على كائنات متداخلة، يقوم Milvus بإنشاء أسماء أعمدة قائمة على المسار تلقائيًا. على سبيل المثال، يمكن تخزين حقل <code translate="no">name</code> داخل كائن <code translate="no">user</code> باسم العمود <code translate="no">/user/name</code>.</p></li>
<li><p>يتم تخزين المفاتيح المشتركة معًا في عمود JSON ثنائي واحد مضغوط. نظرًا لأن هذه المفاتيح تظهر بشكل غير متكرر، يقوم Milvus ببناء فهرس مقلوب لها، مما يتيح التصفية السريعة ويسمح للنظام بتحديد موقع الصفوف التي تحتوي على المفتاح المحدد بسرعة.</p></li>
</ul>
<h3 id="Intelligent-Column-Management" class="common-anchor-header">الإدارة الذكية للأعمدة</h3><p>بالإضافة إلى تقطيع JSON إلى أعمدة، يضيف Milvus طبقة إضافية من الذكاء من خلال إدارة الأعمدة الديناميكية، مما يضمن بقاء تقطيع JSON Shredding مرنًا مع تطور البيانات.</p>
<ul>
<li><p><strong>أعمدة يتم إنشاؤها حسب الحاجة:</strong> عندما تظهر مفاتيح جديدة في مستندات JSON الواردة، يقوم Milvus تلقائيًا بتجميع القيم التي تحمل نفس المفتاح في عمود مخصص. يحافظ هذا على مزايا الأداء للتخزين العمودي دون الحاجة إلى أن يقوم المستخدمون بتصميم المخططات مسبقًا. يستنتج Milvus أيضًا نوع البيانات للحقول الجديدة (على سبيل المثال، INTEGER، DOUBLE، VARCHAR) ويحدد تنسيقًا عموديًا فعالاً لها.</p></li>
<li><p><strong>يتم التعامل مع كل مفتاح تلقائيًا:</strong> يقوم Milvus بتحليل ومعالجة كل مفتاح في مستند JSON. وهذا يضمن تغطية واسعة للاستعلام دون إجبار المستخدمين على تحديد الحقول مسبقًا أو إنشاء فهارس مسبقًا.</p></li>
</ul>
<h3 id="Query-Optimization" class="common-anchor-header">تحسين الاستعلام</h3><p>بمجرد إعادة تنظيم البيانات في الأعمدة الصحيحة، يقوم Milvus بتحديد مسار التنفيذ الأكثر كفاءة لكل استعلام:</p>
<ul>
<li><p><strong>المسح المباشر للأعمدة للمفاتيح المكتوبة والديناميكية:</strong> إذا كان الاستعلام يستهدف حقلاً تم تقسيمه بالفعل إلى عمود خاص به، يمكن لـ Milvus مسح هذا العمود مباشرةً. يقلل هذا من إجمالي كمية البيانات التي يجب معالجتها ويستفيد من الحوسبة العمودية المسرّعة SIMD من أجل تنفيذ أسرع.</p></li>
<li><p><strong>البحث المفهرس للمفاتيح المشتركة:</strong> إذا كان الاستعلام يتضمن حقلاً لم يتم ترقيته إلى عمود خاص به - عادةً ما يكون مفتاحًا نادرًا - يقوم ميلفوس بتقييمه مقابل عمود المفتاح المشترك. يسمح الفهرس المقلوب المبني على هذا العمود ل Milvus بتحديد الصفوف التي تحتوي على المفتاح المحدد بسرعة وتخطي الباقي، مما يحسن الأداء بشكل كبير للحقول ذات التردد المنخفض.</p></li>
<li><p><strong>إدارة البيانات الوصفية التلقائية:</strong> يحتفظ Milvus باستمرار بالبيانات الوصفية والقواميس العالمية بحيث تظل الاستعلامات دقيقة وفعالة، حتى مع تطور بنية مستندات JSON الواردة بمرور الوقت.</p></li>
</ul>
<h2 id="Performance-benchmarks" class="common-anchor-header">معايير الأداء<button data-href="#Performance-benchmarks" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>لقد صممنا معيارًا لمقارنة أداء الاستعلام لتخزين مستند JSON بأكمله كحقل خام واحد مقابل استخدام ميزة تمزيق JSON التي تم إصدارها حديثًا.</p>
<h3 id="Test-environment-and-methodology" class="common-anchor-header">بيئة الاختبار والمنهجية</h3><ul>
<li><p>الأجهزة: 1 نواة / 8 جيجابايت</p></li>
<li><p>مجموعة البيانات: 1 مليون مستند من <a href="https://github.com/ClickHouse/JSONBench.git">JSONBench</a></p></li>
<li><p>المنهجية: قياس سرعة الاستجابة في الثانية والكمون عبر أنماط استعلام مختلفة</p></li>
</ul>
<h3 id="Results-typed-keys" class="common-anchor-header">النتائج: مفاتيح مكتوبة</h3><p>يقيس هذا الاختبار الأداء عند الاستعلام عن مفتاح موجود في معظم المستندات.</p>
<table>
<thead>
<tr><th>تعبير الاستعلام</th><th>QPS (بدون تمزيق)</th><th>QPS (مع التقطيع)</th><th>تعزيز الأداء</th></tr>
</thead>
<tbody>
<tr><td>json['time_us] &gt; 0</td><td>8.69</td><td>287.5</td><td><strong>33x</strong></td></tr>
<tr><td>json['kind] = = 'التزام'</td><td>8.42</td><td>126.1</td><td><strong>14.9x</strong></td></tr>
</tbody>
</table>
<h3 id="Results-shared-keys" class="common-anchor-header">النتائج: المفاتيح المشتركة</h3><p>ركز هذا الاختبار على الاستعلام عن المفاتيح المتفرقة والمتداخلة التي تندرج ضمن فئة "المشتركة".</p>
<table>
<thead>
<tr><th>تعبير الاستعلام</th><th>QPS (بدون تمزيق)</th><th>QPS (مع التقطيع)</th><th>تعزيز الأداء</th></tr>
</thead>
<tbody>
<tr><td>json['identity]['seq] &gt; 0</td><td>4.33</td><td>385</td><td><strong>88.9x</strong></td></tr>
<tr><td>json['identity']['did'] = = 'xxxxx'</td><td>7.6</td><td>352</td><td><strong>46.3x</strong></td></tr>
</tbody>
</table>
<p>تُظهر الاستعلامات ذات المفتاح المشترك التحسينات الأكثر دراماتيكية (حتى 89 ضعفًا أسرع)، بينما تقدم الاستعلامات ذات المفتاح المكتوب تسريعًا ثابتًا يتراوح بين 15 و30 ضعفًا. بشكل عام، يستفيد كل نوع استعلام من JSON Shredding، مع مكاسب واضحة في الأداء في جميع المجالات.</p>
<h2 id="Try-It-Now" class="common-anchor-header">جرّبها الآن<button data-href="#Try-It-Now" class="anchor-icon" translate="no">
      <svg translate="no"
        aria-hidden="true"
        focusable="false"
        height="20"
        version="1.1"
        viewBox="0 0 16 16"
        width="16"
      >
        <path
          fill="#0092E4"
          fill-rule="evenodd"
          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
        ></path>
      </svg>
    </button></h2><p>سواء كنت تعمل مع سجلات واجهة برمجة التطبيقات، أو بيانات مستشعرات إنترنت الأشياء، أو حمولات التطبيقات سريعة التطور، تمنحك JSON Shredding القدرة النادرة على التمتع بالمرونة والأداء العالي.</p>
<p>الميزة متاحة الآن ونرحب بتجربتها الآن. يمكنك أيضًا مراجعة <a href="https://milvus.io/docs/json-shredding.md">هذا المستند</a> لمزيد من التفاصيل.</p>
<p>هل لديك أسئلة أو تريد التعمق في أي ميزة في أحدث إصدار من ميلفوس؟ انضم إلى<a href="https://discord.com/invite/8uyFbECzPX"> قناة Discord</a> الخاصة بنا أو قم بتسجيل المشكلات على<a href="https://github.com/milvus-io/milvus"> GitHub</a>. يمكنك أيضًا حجز جلسة فردية مدتها 20 دقيقة للحصول على رؤى وإرشادات وإجابات لأسئلتك من خلال<a href="https://milvus.io/blog/join-milvus-office-hours-to-get-support-from-vectordb-experts.md"> ساعات عمل Milvus المكتبية</a>.</p>
<p>وإذا كنت ترغب في استكشاف المزيد، ترقبوا المزيد من التعمق في سلسلة أسبوع ميلفوس.</p>

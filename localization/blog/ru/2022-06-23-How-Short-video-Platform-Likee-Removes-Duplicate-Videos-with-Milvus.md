---
id: >-
  2022-06-23-How-Short-video-Platform-Likee-Removes-Duplicate-Videos-with-Milvus.md
title: >-
  Как платформа для коротких видеороликов Likee удаляет дубликаты видео с
  помощью Milvus
author: 'Xinyang Guo, Baoyu Han'
date: 2022-06-23T00:00:00.000Z
desc: >-
  Узнайте, как Likee использует Milvus для выявления дубликатов видео за
  миллисекунды.
cover: >-
  assets.zilliz.com/How_Short_video_Platform_Likee_Removes_Duplicate_Videos_with_Milvus_07bd75ec82.png
tag: Scenarios
tags: Use Cases of Milvus
canonicalUrl: >-
  https://milvus.io/blog/2022-06-23-How-Short-video-Platform-Likee-Removes-Duplicate-Videos-with-Milvus.md
---
<p>
  
   <span class="img-wrapper"> <img translate="no" src="https://assets.zilliz.com/How_Short_video_Platform_Likee_Removes_Duplicate_Videos_with_Milvus_07bd75ec82.png" alt="Cover image" class="doc-image" id="cover-image" />
   </span> <span class="img-wrapper"> <span>Изображение на обложке</span> </span></p>
<blockquote>
<p>Эта статья написана Синьяном Гуо и Баоюй Хань, инженерами компании BIGO, а переведена <a href="https://www.linkedin.cn/incareer/in/rosie-zhang-694528149">Рози Чжан</a>.</p>
</blockquote>
<p><a href="https://www.bigo.sg/">BIGO Technology</a> (BIGO) - одна из самых быстрорастущих сингапурских технологических компаний. Созданные на основе технологии искусственного интеллекта видеопродукты и сервисы BIGO завоевали огромную популярность во всем мире и насчитывают более 400 миллионов пользователей в более чем 150 странах. К ним относятся <a href="https://www.bigo.tv/bigo_intro/en.html?hk=true">Bigo Live</a> (прямые трансляции) и <a href="https://likee.video/">Likee</a> (короткие видеоролики).</p>
<p>Likee - это глобальная платформа для создания коротких видео, где пользователи могут делиться своими моментами, выражать себя и общаться с миром. Чтобы повысить удобство использования и рекомендовать пользователям более качественный контент, Likee необходимо отсеивать дубликаты видео из огромного количества видеороликов, ежедневно генерируемых пользователями, что представляет собой непростую задачу.</p>
<p>В этом блоге рассказывается о том, как BIGO использует <a href="https://milvus.io">Milvus</a>, векторную базу данных с открытым исходным кодом, для эффективного удаления дубликатов видео.</p>
<p><strong>Перейти к:</strong></p>
<ul>
<li><a href="#Overview">Обзор</a></li>
<li><a href="#Video-deduplication-workflow">Рабочий процесс дедупликации видео</a></li>
<li><a href="#System-architecture">Архитектура системы</a></li>
<li><a href="#Using-Milvus-vector-database-to-power-similarity-search">Использование Milvus для поиска по сходству</a></li>
</ul>
<custom-h1>Обзор</custom-h1><p>Milvus - это векторная база данных с открытым исходным кодом, обеспечивающая сверхбыстрый векторный поиск. Используя Milvus, компания Likee может завершить поиск в течение 200 мс, обеспечивая при этом высокий коэффициент отзыва. При этом, <a href="https://milvus.io/docs/v2.0.x/scaleout.md#Scale-a-Milvus-Cluster">масштабируя Milvus по горизонтали</a>, Likee успешно увеличивает пропускную способность векторных запросов, что еще больше повышает эффективность.</p>
<custom-h1>Рабочий процесс дедупликации видео</custom-h1><p>Как Likee выявляет дубликаты видео? Каждый раз, когда в систему Likee поступает видео с запросом, оно разрезается на 15-20 кадров, и каждый кадр преобразуется в вектор признаков. Затем Likee выполняет поиск в базе данных из 700 миллионов векторов, чтобы найти K наиболее похожих векторов. Каждый из K наиболее похожих векторов соответствует видео в базе данных. Далее Likee проводит уточняющий поиск, чтобы получить окончательные результаты и определить видео, которые необходимо удалить.</p>
<custom-h1>Архитектура системы</custom-h1><p>Давайте рассмотрим подробнее, как работает система дедупликации видео в Likee с помощью Milvus. Как показано на схеме ниже, новые видео, загруженные на Likee, записываются в Kafka, систему хранения данных, в режиме реального времени и потребляются потребителями Kafka. Векторы признаков этих видео извлекаются с помощью моделей глубокого обучения, где неструктурированные данные (видео) преобразуются в векторы признаков. Эти векторы признаков будут упакованы системой и отправлены аудитору сходства.</p>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="https://assets.zilliz.com/Likee_1_6f7ebcd8fc.png" alt="Architechure of Likee's video de-duplication system" class="doc-image" id="architechure-of-likee's-video-de-duplication-system" />
   </span> <span class="img-wrapper"> <span>Архитектура системы дедупликации видео Likee</span> </span></p>
<p>Извлеченные векторы признаков будут проиндексированы Milvus и сохранены в Ceph, после чего будут <a href="https://milvus.io/blog/deep-dive-5-real-time-query.md">загружены узлом запроса Milvus</a> для дальнейшего поиска. Соответствующие видеоидентификаторы этих векторов признаков также будут одновременно храниться в TiDB или Pika в зависимости от фактических потребностей.</p>
<h3 id="Using-Milvus-vector-database-to-power-similarity-search" class="common-anchor-header">Использование базы данных векторов Milvus для поиска сходства</h3><p>При поиске похожих векторов миллиарды существующих данных, а также большое количество новых данных, генерируемых каждый день, создают большие проблемы для функциональности системы векторного поиска. После тщательного анализа компания Likee выбрала для поиска сходства векторов распределенную систему векторного поиска Milvus, обладающую высокой производительностью и высоким коэффициентом отзыва.</p>
<p>Как показано на схеме ниже, процедура поиска сходства происходит следующим образом:</p>
<ol>
<li><p>Сначала Milvus выполняет пакетный поиск, чтобы вспомнить 100 лучших похожих векторов для каждого из нескольких векторов признаков, извлеченных из нового видео. Каждый похожий вектор привязывается к соответствующему идентификатору видео.</p></li>
<li><p>Во-вторых, сравнивая идентификаторы видео, Milvus удаляет дублирующие видео и извлекает векторы признаков оставшихся видео из TiDB или Pika.</p></li>
<li><p>Наконец, Milvus рассчитывает и оценивает сходство между каждым набором полученных векторов признаков и векторами признаков запрашиваемого видео. В качестве результата возвращается идентификатор видео с наибольшей оценкой. На этом поиск сходства видео завершен.</p></li>
</ol>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="https://assets.zilliz.com/02_a24d251c8f.png" alt="Procedure of a similarity search" class="doc-image" id="procedure-of-a-similarity-search" />
   </span> <span class="img-wrapper"> <span>Процедура поиска сходства</span> </span></p>
<p>Будучи высокопроизводительной векторной поисковой системой, Milvus проделал огромную работу в системе дедупликации видео Likee, значительно стимулируя рост бизнеса BIGO по производству короткого видео. Что касается видеобизнеса, то существует множество других сценариев, в которых можно применить Milvus, например, блокировка нелегального контента или персонализированные видеорекомендации. BIGO и Milvus надеются на дальнейшее сотрудничество в новых областях.</p>

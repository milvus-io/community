---
id: Milvus-Was-Built-for-Massive-Scale-Think-Trillion-Vector-Similarity-Search.md
title: >-
  Milvus был создан для поиска векторного сходства в огромных масштабах (считай,
  триллион)
author: milvus
date: 2021-01-13T08:56:00.480Z
desc: >-
  Используйте возможности открытого исходного кода в своем следующем проекте по
  ИИ или машинному обучению. Управляйте огромными векторными данными и
  используйте поиск по сходству с помощью Milvus.
cover: assets.zilliz.com/1_9a6be0b54f.jpg
tag: Engineering
canonicalUrl: >-
  https://zilliz.com/blog/Milvus-Was-Built-for-Massive-Scale-Think-Trillion-Vector-Similarity-Search
---
<custom-h1>Milvus создан для векторного поиска сходства в огромных масштабах (считайте, триллион)</custom-h1><p>Каждый день неисчислимое количество важных для бизнеса сведений теряется из-за того, что компании не могут разобраться в собственных данных. На неструктурированные данные, такие как текст, изображения, видео и аудио, по оценкам, приходится 80 % всех данных, но лишь 1 % из них когда-либо анализируется. К счастью, <a href="https://medium.com/unstructured-data-service/the-easiest-way-to-search-among-1-billion-image-vectors-d6faf72e361f">искусственный интеллект (ИИ)</a>, программное обеспечение с открытым исходным кодом и закон Мура делают машинную аналитику более доступной, чем когда-либо прежде. С помощью поиска векторного сходства можно извлечь ценность из огромных неструктурированных наборов данных. Эта техника предполагает преобразование неструктурированных данных в векторы признаков - удобный для машин формат числовых данных, который можно обрабатывать и анализировать в режиме реального времени.</p>
<p>Векторный поиск сходства находит применение в электронной коммерции, безопасности, разработке новых лекарств и т. д. Эти решения опираются на динамические наборы данных, содержащие миллионы, миллиарды и даже триллионы векторов, и их полезность часто зависит от практически мгновенного получения результатов. <a href="https://milvus.io/">Milvus</a> - это решение для управления векторными данными с открытым исходным кодом, созданное с нуля для эффективного управления и поиска в больших векторных массивах данных. В этой статье рассказывается о подходе Milvus к управлению векторными данными, а также о том, как платформа была оптимизирована для поиска векторных сходств.</p>
<p><strong>Перейти к:</strong></p>
<ul>
<li><a href="#milvus-was-built-for-massive-scale-think-trillion-vector-similarity-search">Milvus создана для поиска векторного сходства в огромных масштабах (считайте, триллион)</a><ul>
<li><a href="#lsm-trees-keep-dynamic-data-management-efficient-at-massive-scales">Деревья LSM обеспечивают эффективное управление динамическими данными в огромных масштабах</a>- <a href="#a-segment-of-10-dimensional-vectors-in-milvus"><em>сегмент 10-мерных векторов в Milvus.</em></a></li>
<li><a href="#data-management-is-optimized-for-rapid-access-and-limited-fragmentation">Управление данными оптимизировано для быстрого доступа и ограниченной фрагментации</a>- <a href="#an-illustration-of-inserting-vectors-in-milvus"><em>Иллюстрация вставки векторов в Milvus.</em></a>- <a href="#queried-data-files-before-the-merge"><em>Запрашиваемые файлы данных до слияния.</em></a>- <a href="#queried-data-files-after-the-merge"><em>Запрашиваемые файлы данных после слияния.</em></a></li>
<li><a href="#similarity-searched-is-accelerated-by-indexing-vector-data">Поиск сходства ускоряется за счет индексирования векторных данных</a></li>
<li><a href="#learn-more-about-milvus">Узнайте больше о Milvus</a></li>
</ul></li>
</ul>
<h3 id="LSM-trees-keep-dynamic-data-management-efficient-at-massive-scales" class="common-anchor-header">Деревья LSM обеспечивают эффективное управление динамическими данными в огромных масштабах</h3><p>Для обеспечения эффективного динамического управления данными в Milvus используется структура данных log-structured merge-tree (LSM tree). Деревья LSM хорошо подходят для доступа к данным с большим количеством вставок и удалений. Подробную информацию о специфических атрибутах LSM-деревьев, которые помогают обеспечить высокопроизводительное динамическое управление данными, можно найти в <a href="http://paperhub.s3.amazonaws.com/18e91eb4db2114a06ea614f0384f2784.pdf">оригинальном исследовании</a>, опубликованном его изобретателями. Деревья LSM являются базовой структурой данных, используемой во многих популярных базах данных, включая <a href="https://cloud.google.com/bigtable">BigTable</a>, <a href="https://cassandra.apache.org/">Cassandra</a> и <a href="https://rocksdb.org/">RocksDB</a>.</p>
<p>Векторы в Milvus существуют как сущности и хранятся в сегментах. Каждый сегмент содержит от одной до ~8 миллионов сущностей. Каждая сущность имеет поля для уникального идентификатора и входов вектора, причем последние представляют собой от 1 до 32768 измерений.</p>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="https://assets.zilliz.com/Blog_Milvus_Was_Built_for_Massive_Scale_Think_Trillion_Vector_Similarity_Search_2_492d31c7a0.png" alt="Blog_Milvus Was Built for Massive-Scale (Think Trillion) Vector Similarity Search_2.png" class="doc-image" id="blog_milvus-was-built-for-massive-scale-(think-trillion)-vector-similarity-search_2.png" />
   </span> <span class="img-wrapper"> <span>Блог_Мильвус был создан для массового (считайте, триллионного) поиска векторного сходства_2.png</span> </span></p>
<h3 id="Data-management-is-optimized-for-rapid-access-and-limited-fragmentation" class="common-anchor-header">Управление данными оптимизировано для быстрого доступа и ограниченной фрагментации</h3><p>При получении запроса на вставку Milvus записывает новые данные в <a href="https://milvus.io/docs/v0.11.0/write_ahead_log.md">журнал опережающей записи (WAL)</a>. После того как запрос успешно записан в журнал, данные записываются в буфер с возможностью изменения. Наконец, один из трех триггеров приводит к тому, что буфер становится неизменяемым и стирается на диск:</p>
<ol>
<li><strong>Временные интервалы:</strong> Данные регулярно сбрасываются на диск через определенные промежутки времени (по умолчанию 1 секунда).</li>
<li><strong>Размер буфера:</strong> Накопленные данные достигают верхнего предела для неизменяемого буфера (128 МБ).</li>
<li><strong>Ручной триггер:</strong> Данные вручную сбрасываются на диск, когда клиент вызывает функцию flush.</li>
</ol>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="https://assets.zilliz.com/Blog_Milvus_Was_Built_for_Massive_Scale_Think_Trillion_Vector_Similarity_Search_3_852dc2c9bb.png" alt="Blog_Milvus Was Built for Massive-Scale (Think Trillion) Vector Similarity Search_3.png" class="doc-image" id="blog_milvus-was-built-for-massive-scale-(think-trillion)-vector-similarity-search_3.png" />
   </span> <span class="img-wrapper"> <span>Блог_Мильвус был создан для массового (считай, триллионного) поиска векторного сходства_3.png</span> </span></p>
<p>Пользователи могут добавлять десятки или миллионы векторов за раз, генерируя файлы данных разного размера по мере добавления новых векторов. Это приводит к фрагментации, которая может усложнить управление данными и замедлить поиск векторного сходства. Чтобы предотвратить чрезмерную фрагментацию данных, Milvus постоянно объединяет сегменты данных, пока общий размер файла не достигнет настраиваемого пользователем предела (например, 1 ГБ). Например, при верхнем пределе в 1 ГБ вставка 100 миллионов 512-мерных векторов приведет к созданию всего ~200 файлов данных.</p>
<p>В сценариях инкрементальных вычислений, где векторы вставляются и ищутся одновременно, Milvus делает вновь вставленные векторные данные сразу доступными для поиска, прежде чем объединить их с другими данными. После слияния исходные файлы данных будут удалены, а для поиска будет использоваться только что созданный объединенный файл.</p>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="https://assets.zilliz.com/Blog_Milvus_Was_Built_for_Massive_Scale_Think_Trillion_Vector_Similarity_Search_4_6bef3d914c.png" alt="Blog_Milvus Was Built for Massive-Scale (Think Trillion) Vector Similarity Search_4.png" class="doc-image" id="blog_milvus-was-built-for-massive-scale-(think-trillion)-vector-similarity-search_4.png" />
   </span> <span class="img-wrapper"> <span>Blog_Milvus Was Built for Massive-Scale (Think Trillion) Vector Similarity Search_4.png</span> </span></p>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="https://assets.zilliz.com/Blog_Milvus_Was_Built_for_Massive_Scale_Think_Trillion_Vector_Similarity_Search_5_3851c2d789.png" alt="Blog_Milvus Was Built for Massive-Scale (Think Trillion) Vector Similarity Search_5.png" class="doc-image" id="blog_milvus-was-built-for-massive-scale-(think-trillion)-vector-similarity-search_5.png" />
   </span> <span class="img-wrapper"> <span>Blog_Milvus Was Built for Massive-Scale (Think Trillion) Vector Similarity Search_5.png</span> </span></p>
<h3 id="Similarity-searched-is-accelerated-by-indexing-vector-data" class="common-anchor-header">Поиск сходства ускоряется за счет индексирования векторных данных</h3><p>По умолчанию Milvus использует грубый поиск при запросе векторных данных. Этот подход, также известный как исчерпывающий поиск, проверяет все векторные данные каждый раз, когда выполняется запрос. Для наборов данных, содержащих миллионы или миллиарды многомерных векторов, этот процесс слишком медленный, чтобы быть полезным в большинстве сценариев поиска сходства. Чтобы ускорить время выполнения запроса, используются алгоритмы построения векторного индекса. Индексированные данные группируются таким образом, что похожие векторы оказываются ближе друг к другу, что позволяет системе поиска сходства запрашивать только часть всех данных, значительно сокращая время запроса, но при этом жертвуя точностью.</p>
<p>Большинство типов векторных индексов, поддерживаемых Milvus, используют алгоритмы приближенного поиска ближайших соседей (ANN). Существует множество ANN-индексов, и каждый из них имеет свои компромиссы между производительностью, точностью и требованиями к хранению данных. Milvus поддерживает индексы на основе квантования, графов и деревьев, которые служат для различных сценариев применения. Более подробную информацию о построении индексов и конкретных типах векторных индексов, поддерживаемых Milvus, можно найти в <a href="https://milvus.io/docs/v0.11.0/index.md#CPU">технической документации</a> Milvus.</p>
<p>При построении индексов генерируется большое количество метаданных. Например, индексирование 100 миллионов 512-мерных векторов, сохраненных в 200 файлах данных, приведет к созданию еще 200 индексных файлов. Чтобы эффективно проверять состояние файлов, удалять или вставлять новые файлы, необходима эффективная система управления метаданными. В Milvus используется онлайновая обработка транзакций (OLTP) - метод обработки данных, который хорошо подходит для обновления и/или удаления небольших объемов данных в базе данных. Для управления метаданными Milvus использует SQLite или MySQL.</p>
<h3 id="Learn-more-about-Milvus" class="common-anchor-header">Подробнее о Milvus</h3><p>Milvus - это платформа управления векторными данными с открытым исходным кодом, которая в настоящее время находится в стадии инкубации в <a href="https://lfaidata.foundation/">LF AI &amp; Data</a>, головной организации Linux Foundation. Milvus получила открытый исходный код в 2019 году от <a href="https://zilliz.com">Zilliz</a>, компании-разработчика программного обеспечения для науки о данных, которая инициировала проект. Более подробную информацию о Milvus можно найти на его <a href="https://milvus.io/">сайте</a>. Если вас интересует поиск по векторному сходству или использование ИИ для раскрытия потенциала неструктурированных данных, присоединяйтесь к нашему <a href="https://github.com/milvus-io">сообществу с открытым исходным кодом</a> на GitHub.</p>

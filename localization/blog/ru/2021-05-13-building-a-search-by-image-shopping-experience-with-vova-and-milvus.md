---
id: building-a-search-by-image-shopping-experience-with-vova-and-milvus.md
title: Создание системы поиска покупок по изображениям с помощью VOVA и Milvus
author: milvus
date: 2021-05-13T08:44:05.528Z
desc: >-
  Узнайте, как Milvus, база данных векторов с открытым исходным кодом, была
  использована платформой электронной коммерции VOVA для организации покупок по
  изображениям.
cover: assets.zilliz.com/vova_thumbnail_db2d6c0c9c.jpg
tag: Scenarios
canonicalUrl: >-
  https://zilliz.com/blog/building-a-search-by-image-shopping-experience-with-vova-and-milvus
---
<custom-h1>Построение системы поиска по изображениям в магазинах с помощью VOVA и Milvus</custom-h1><p>Перейти к:</p>
<ul>
<li><a href="#building-a-search-by-image-shopping-experience-with-vova-and-milvus">Построение поиска по изображениям в магазинах с помощью VOVA и Milvus</a><ul>
<li><a href="#how-does-image-search-work">Как работает поиск по изображениям?</a>- <a href="#system-process-of-vovas-search-by-image-functionality"><em>Системный процесс функциональности поиска по изображениям в VOVA.</em></a></li>
<li><a href="#target-detection-using-the-yolo-model">Обнаружение целей с помощью модели YOLO</a>- <a href="#yolo-network-architecture"><em>архитектура сети YOLO.</em></a></li>
<li><a href="#image-feature-vector-extraction-with-resnet">Извлечение вектора признаков изображения с помощью ResNet</a>- <a href="#resnet-structure"><em>структура ResNet.</em></a></li>
<li><a href="#vector-similarity-search-powered-by-milvus">Векторный поиск по сходству на базе Milvus</a>- <a href="#mishards-architecture-in-milvus"><em>архитектура Mishards в Milvus.</em></a></li>
<li><a href="#vovas-shop-by-image-tool">VOVA's shop by image tool</a>- <a href="#screenshots-of-vovas-search-by-image-shopping-tool"><em>Скриншоты инструмента VOVA's search by image shopping tool.</em></a></li>
<li><a href="#reference">Ссылка</a></li>
</ul></li>
</ul>
<p>В 2020 г. онлайн-покупки резко возросли, <a href="https://www.digitalcommerce360.com/2021/02/15/ecommerce-during-coronavirus-pandemic-in-charts/">на 44 %</a>, во многом благодаря пандемии коронавируса. Поскольку люди стремились к социальной дистанции и избегали контактов с незнакомцами, бесконтактная доставка стала невероятно желанным вариантом для многих потребителей. Эта популярность также привела к тому, что люди стали покупать в Интернете все больше разнообразных товаров, включая нишевые товары, которые сложно описать с помощью традиционного поиска по ключевым словам.</p>
<p>Чтобы помочь пользователям преодолеть ограничения, накладываемые запросами по ключевым словам, компании могут создавать поисковые системы по изображениям, которые позволяют пользователям использовать для поиска не слова, а изображения. Это не только позволяет пользователям находить предметы, которые трудно описать, но и помогает им покупать вещи, с которыми они сталкиваются в реальной жизни. Такая функциональность помогает создать уникальный пользовательский опыт и обеспечивает общее удобство, которое ценят покупатели.</p>
<p>VOVA - это развивающаяся платформа электронной коммерции, которая ориентирована на доступность и положительный опыт покупок для своих пользователей. Она предлагает миллионы товаров, поддерживает 20 языков и 35 основных валют. Чтобы повысить удобство покупок для своих пользователей, компания использовала Milvus для встраивания функции поиска по изображениям в свою платформу электронной коммерции. В статье рассматривается, как VOVA успешно создала систему поиска по изображениям с помощью Milvus.</p>
<p><br/></p>
<h3 id="How-does-image-search-work" class="common-anchor-header">Как работает поиск по изображениям?</h3><p>Система VOVA "Магазин по картинке" ищет в инвентаре компании изображения товаров, которые похожи на загруженные пользователями. На следующей схеме показаны два этапа работы системы: этап импорта данных (синий) и этап запроса (оранжевый):</p>
<ol>
<li>Использование модели YOLO для обнаружения целей на загруженных фотографиях;</li>
<li>Использование ResNet для извлечения векторов признаков из обнаруженных целей;</li>
<li>использование Milvus для поиска векторного сходства.</li>
</ol>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="https://assets.zilliz.com/Vova_1_47ee6f2da9.png" alt="Vova-1.png" class="doc-image" id="vova-1.png" />
   </span> <span class="img-wrapper"> <span>Vova-1.png</span> </span></p>
<p><br/></p>
<h3 id="Target-detection-using-the-YOLO-model" class="common-anchor-header">Обнаружение целей с помощью модели YOLO</h3><p>Мобильные приложения VOVA для Android и iOS в настоящее время поддерживают поиск изображений. Компания использует современную систему обнаружения объектов в реальном времени под названием YOLO (You only look once) для обнаружения объектов на загруженных пользователем изображениях. В настоящее время модель YOLO находится в пятой итерации.</p>
<p>YOLO - это одноступенчатая модель, использующая только одну конволюционную нейронную сеть (CNN) для предсказания категорий и положения различных целей. Она небольшая, компактная и хорошо подходит для мобильного использования.</p>
<p>YOLO использует сверточные слои для извлечения признаков и полносвязные слои для получения прогнозируемых значений. По мотивам модели GooLeNet, CNN YOLO включает 24 сверточных слоя и два полностью связанных слоя.</p>
<p>Как показано на следующей иллюстрации, входное изображение размером 448 × 448 преобразуется несколькими конволюционными слоями и слоями объединения в тензор размером 7 × 7 × 1024 (изображен на предпоследнем кубике), а затем преобразуется двумя полносвязными слоями в тензор размером 7 × 7 × 30 на выходе.</p>
<p>Предсказанный выход YOLO P - это двумерный тензор, форма которого [партия,7 × 7 × 30]. Используя нарезку, P[:,0:7×7×20] - вероятность категории, P[:,7×7×20:7×7×(20+2)] - уверенность, а P[:,7×7×(20+2)]:] - предсказанный результат ограничительного поля.</p>
<p>![vova-2.png] (https://assets.zilliz.com/vova_2_1ccf38f721.png &quot;Архитектура сети YOLO&quot;).</p>
<p><br/></p>
<h3 id="Image-feature-vector-extraction-with-ResNet" class="common-anchor-header">Выделение вектора признаков изображения с помощью ResNet</h3><p>VOVA использует модель остаточной нейронной сети (ResNet) для извлечения векторов признаков из обширной библиотеки изображений продуктов и фотографий, загруженных пользователями. Возможности ResNet ограничены, поскольку с увеличением глубины обучаемой сети точность сети снижается. На изображении ниже показано, как в ResNet работает модель VGG19 (вариант модели VGG), модифицированная для включения остаточной единицы через механизм короткого замыкания. Модель VGG была предложена в 2014 году и включает всего 14 слоев, в то время как ResNet появилась годом позже и может иметь до 152 слоев.</p>
<p>Структура ResNet легко модифицируется и масштабируется. Изменяя количество каналов в блоке и количество сложенных блоков, можно легко регулировать ширину и глубину сети, получая сети с различными выразительными возможностями. Это позволяет эффективно устранить эффект вырождения сети, когда точность снижается по мере увеличения глубины обучения. При достаточном количестве обучающих данных можно получить модель с улучшенными выразительными характеристиками, постепенно углубляя сеть. В процессе обучения модели для каждой картинки извлекаются признаки и преобразуются в 256-мерные векторы с плавающей запятой.</p>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="https://assets.zilliz.com/vova_3_df4b810281.png" alt="vova-3.png" class="doc-image" id="vova-3.png" />
   </span> <span class="img-wrapper"> <span>vova-3.png</span> </span></p>
<p><br/></p>
<h3 id="Vector-similarity-search-powered-by-Milvus" class="common-anchor-header">Векторный поиск сходства на базе Milvus</h3><p>База данных изображений товаров VOVA насчитывает 30 миллионов изображений и быстро растет. Для быстрого извлечения наиболее похожих изображений товаров из этого огромного набора данных используется система Milvus для векторного поиска сходства. Благодаря ряду оптимизаций Milvus предлагает быстрый и оптимизированный подход к управлению векторными данными и созданию приложений машинного обучения. Milvus предлагает интеграцию с популярными библиотеками индексов (например, Faiss, Annoy), поддерживает множество типов индексов и метрик расстояний, имеет SDK на нескольких языках и предоставляет богатые API для управления векторными данными.</p>
<p>Milvus может выполнять поиск по сходству в триллионных векторных наборах данных за миллисекунды, при этом время запроса составляет менее 1,5 секунды при nq=1, а среднее время пакетного запроса - менее 0,08 секунды. Для создания своей системы поиска изображений компания VOVA использовала дизайн Mishards, промежуточного программного обеспечения для шардинга от Milvus (см. схему ниже), чтобы реализовать высокодоступный серверный кластер. Благодаря горизонтальной масштабируемости кластера Milvus удалось удовлетворить требования проекта по высокой производительности запросов к огромным массивам данных.</p>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="https://assets.zilliz.com/vova_4_e305f1955c.png" alt="vova-4.png" class="doc-image" id="vova-4.png" />
   </span> <span class="img-wrapper"> <span>vova-4.png</span> </span></p>
<h3 id="VOVAs-shop-by-image-tool" class="common-anchor-header">Инструмент VOVA "Магазин по картинкам</h3><p>На скриншотах ниже показан инструмент VOVA для поиска покупок по картинкам в приложении компании для Android.</p>
<p>
  
   <span class="img-wrapper"> <img translate="no" src="https://assets.zilliz.com/vova_5_c4c25a3bae.png" alt="vova-5.png" class="doc-image" id="vova-5.png" />
   </span> <span class="img-wrapper"> <span>vova-5.png</span> </span></p>
<p>По мере того как все больше пользователей будут искать товары и загружать фотографии, VOVA продолжит оптимизировать модели, на которых основана система. Кроме того, компания будет внедрять новые функциональные возможности Milvus, которые еще больше улучшат опыт онлайн-покупок для ее пользователей.</p>
<h3 id="Reference" class="common-anchor-header">Ссылка</h3><p><strong>YOLO:</strong></p>
<p>https://arxiv.org/pdf/1506.02640.pdf</p>
<p>https://arxiv.org/pdf/1612.08242.pdf</p>
<p><strong>ResNet:</strong></p>
<p>https://arxiv.org/abs/1512.03385</p>
<p><strong>Milvus:</strong></p>
<p>https://milvus.io/docs</p>
